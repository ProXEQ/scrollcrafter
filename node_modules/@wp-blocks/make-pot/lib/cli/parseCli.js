"use strict";var w=Object.create;var m=Object.defineProperty;var _=Object.getOwnPropertyDescriptor;var S=Object.getOwnPropertyNames;var J=Object.getPrototypeOf,T=Object.prototype.hasOwnProperty;var j=(t,n)=>{for(var e in n)m(t,e,{get:n[e],enumerable:!0})},g=(t,n,e,o)=>{if(n&&typeof n=="object"||typeof n=="function")for(let s of S(n))!T.call(t,s)&&s!==e&&m(t,s,{get:()=>n[s],enumerable:!(o=_(n,s))||o.enumerable});return t};var u=(t,n,e)=>(e=t!=null?w(J(t)):{},g(n||!t||!t.__esModule?m(e,"default",{value:t,enumerable:!0}):e,t)),v=t=>g(m({},"__esModule",{value:!0}),t);var $={};j($,{parseCliArgs:()=>C,parseJsonArgs:()=>N});module.exports=v($);var a=u(require("node:fs")),i=u(require("node:path")),f=u(require("node:process")),y=require("../const.js"),k=require("../fs/fs"),c=require("../utils/common.js");function O(t="/",n="default"){const e=t;try{return(0,a.accessSync)(i.join(e,`${n}.php`),a.default.constants.R_OK),"plugin"}catch{console.log(`the current working directory ${e} does not contain a ${n}.php file`)}try{return(0,a.accessSync)(i.join(e,"style.css"),a.default.constants.R_OK),"theme"}catch{console.log(`the current working directory ${e} does not contain a style.css file`)}return"generic"}function C(t){const n=t._[0]?.toString(),e=t._[1]?.toString()||"languages",o=n??".",s=e.startsWith("/")?e.slice(1):e,r=f.cwd(),p=t.slug&&typeof t.slug=="string"?t.slug:i.basename(i.resolve(r,o)),l=i.relative(r,o),b=i.relative(r,s);if(!t?.domain)t.domain=O(i.resolve(l),p);else switch(t.domain){case"plugin":case"theme":case"block":case"theme-block":break;default:console.error(`Invalid domain: ${t.domain}. Valid domains are: plugin, theme, block, theme-block, generic`),t.domain="generic"}const d={};for(const D of t.headers){const[P,A]=D.split(":");d[P.trim()]=A.trim()}const h={slug:p,debug:!!t.debug,domain:t.domain,paths:{cwd:l,out:b},options:{ignoreDomain:!!t?.ignoreDomain,packageName:String(t.packageName),silent:t.silent===!0,json:!!t.json,location:!!t?.location,headers:d,theme:!!t?.theme,output:!!t?.output,fileComment:t.fileComment?String(t.fileComment):void 0,charset:(0,k.getEncodingCharset)(t?.charset),skip:{js:!!t.skipJs,php:!!t.skipPhp,blade:!!t.skipBlade,blockJson:!!t.skipBlockJson,themeJson:!!t.skipThemeJson,audit:!!t.skipAudit},translationDomains:t.translationDomains?Array.isArray(t.translationDomains)?t.translationDomains.map(String):[String(t.translationDomains)]:void 0},patterns:{mergePaths:(0,c.stringstring)(t.mergePaths),subtractPaths:(0,c.stringstring)(t.subtractPaths),subtractAndMerge:!!t.subtractAndMerge,include:(0,c.stringstring)(t.include),exclude:[...(0,c.stringstring)(t.exclude),...y.DEFAULT_EXCLUDED_PATH]}};return h.paths.root=t.root?String(t.root):void 0,h}function N(t){const n=t._[0]||"build",e=t._[1]||"languages",o=f.cwd(),s=i.basename(i.resolve(o));let r;return t.scriptName&&(r=t.scriptName.split(",").map(p=>p.trim()),r.length===1&&(r=r[0])),{timeStart:Date.now(),slug:s,source:n,destination:e,scriptName:r,allowedFormats:t.allowedFormats,purge:!!t.purge,stripUnused:!!t.stripUnused,prettyPrint:!!t.prettyPrint,debug:!!t.debug,paths:{cwd:o,out:i.join(o,e)}}}0&&(module.exports={parseCliArgs,parseJsonArgs});
