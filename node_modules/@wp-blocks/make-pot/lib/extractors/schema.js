"use strict";var A=Object.create;var y=Object.defineProperty;var u=Object.getOwnPropertyDescriptor;var v=Object.getOwnPropertyNames;var C=Object.getPrototypeOf,B=Object.prototype.hasOwnProperty;var F=(n,e)=>{for(var s in e)y(n,s,{get:e[s],enumerable:!0})},j=(n,e,s,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of v(e))!B.call(n,r)&&r!==s&&y(n,r,{get:()=>e[r],enumerable:!(i=u(e,r))||i.enumerable});return n};var w=(n,e,s)=>(s=n!=null?A(C(n)):{},j(e||!n||!n.__esModule?y(s,"default",{value:n,enumerable:!0}):s,n)),O=n=>j(y({},"__esModule",{value:!0}),n);var T={};F(T,{JsonSchemaExtractor:()=>c});module.exports=O(T);var $=w(require("../assets/block-i18n.js")),R=w(require("../assets/theme-i18n.js"));class c{static schemaCache={};static themeJsonSource="http://develop.svn.wordpress.org/trunk/src/wp-includes/theme-i18n.json";static themeJsonFallback=R;static blockJsonSource="http://develop.svn.wordpress.org/trunk/src/wp-includes/block-i18n.json";static blockJsonFallback=$;static async loadSchema(e,s){if(c.schemaCache[e])return c.schemaCache[e];try{console.log(`
[i] Loading schema from ${e}`);const i=await fetch(e,{responseType:"json",accept:"application/json",headers:{"Access-Control-Allow-Origin":"*"}}).then(r=>r.json()).catch(r=>{throw new Error(`
Failed to load schema from ${e}. Error: ${r.message}`)});return i?(console.log("Schema loaded successfully"),c.schemaCache[e]=i,i):s}catch(i){return console.error(`
Failed to load schema from ${e}. Using fallback. Error: ${i.message}`),c.schemaCache[e]=s,s}}static async parse(e,s,i){const r=await c.loadSchema(s.url,s.fallback);try{const l=JSON.parse(e);if(!l){console.error("Could not parse JSON.");return}return c.extractFromJsonSchema(l,r,i)}catch(l){console.error(`Error parsing JSON: ${l.message}`);return}}static extractFromJsonSchema(e,s,i={filename:void 0,addReferences:!1}){const{filename:r="block.json",addReferences:l=!1}=i,g=[];function h(t,a,p=[]){if(!(!t||!a)&&typeof t=="object"&&!Array.isArray(t)&&typeof a=="object"&&!Array.isArray(a))for(const o of Object.keys(a))o in t&&(typeof t[o]=="string"?k(t[o],a[o],r,l):Array.isArray(t[o])&&Array.isArray(a[o])?I(t[o],a[o],[...p,o],r,l):typeof t[o]=="object"&&typeof a[o]=="object"&&h(t[o],a[o],[...p,o]))}function I(t,a,p,o,m){if(a.length>0){const d=a[0];for(const f of t)if(typeof f=="string")k(f,d,o,m);else if(typeof f=="object")if(typeof d=="object")h(f,d,p);else for(const b of Object.keys(f))typeof f[b]=="string"&&k(f[b],d,o,m)}}function k(t,a,p,o){if(!t)return;const m={msgid:a,msgctxt:t};o&&(m.comments={reference:[p]}),g.push(m)}return h(e,s),g}}0&&(module.exports={JsonSchemaExtractor});
