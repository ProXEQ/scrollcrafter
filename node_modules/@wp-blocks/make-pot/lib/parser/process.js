"use strict";var F=Object.create;var f=Object.defineProperty;var O=Object.getOwnPropertyDescriptor;var S=Object.getOwnPropertyNames;var j=Object.getPrototypeOf,w=Object.prototype.hasOwnProperty;var x=(t,e)=>{for(var o in e)f(t,o,{get:e[o],enumerable:!0})},d=(t,e,o,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of S(e))!w.call(t,s)&&s!==o&&f(t,s,{get:()=>e[s],enumerable:!(i=O(e,s))||i.enumerable});return t};var v=(t,e,o)=>(o=t!=null?F(j(t)):{},d(e||!t||!t.__esModule?f(o,"default",{value:t,enumerable:!0}):o,t)),A=t=>d(f({},"__esModule",{value:!0}),t);var g={};x(g,{processFiles:()=>T});module.exports=A(g);var r=v(require("node:path")),u=require("../const.js"),h=require("../extractors/json.js"),a=require("../fs/fs.js"),k=require("../fs/glob.js"),P=require("./tree.js");async function T(t,e,o){const i=[];let s=0;const c=(0,k.getFiles)(e,t);o&&(o.setTotal(Object.values(c).length),o.update(0,{filename:`Found ${Object.values(c).length} files`}));for await(const l of c){s++;const n=r.default.basename(l),b=r.default.extname(l).replace(/^./,""),p=r.default.resolve(e.paths.cwd,l);if(n==="theme.json"||n==="block.json")i.push((0,a.readFileAsync)(p).then(m=>(0,h.parseJsonCallback)(m,e.paths.cwd,n)));else if(u.allowedFormats.includes(b)){const m=(0,a.readFileAsync)(p).then(y=>(0,P.doTree)(y,l,e.debug,e));m&&i.push(m)}o&&(o.update(s,{filename:n}),o.render())}return i}0&&(module.exports={processFiles});
