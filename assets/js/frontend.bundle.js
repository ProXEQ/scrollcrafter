(()=>{var _={},W=new WeakSet;function E(e,r){_[e]=r}function T(e=document){if(!e||!e.querySelectorAll)return;e.querySelectorAll("[data-scrollcrafter-config]").forEach(t=>{var g;if(W.has(t))return;let s=t.getAttribute("data-scrollcrafter-config");if(!s)return;let l;try{l=JSON.parse(s)}catch(h){(g=window.ScrollCrafterConfig)!=null&&g.debug&&console.warn("[ScrollCrafter] Invalid config JSON:",h,t);return}let a=l.widget;if(!(!a||typeof _[a]!="function"))try{_[a](t,l),W.add(t),t.dispatchEvent(new CustomEvent("scrollcrafter:init",{bubbles:!0,detail:{type:a,config:l}}))}catch(h){console.error(`[ScrollCrafter] Init error for "${a}":`,h)}})}function k(){if(typeof window=="undefined")return null;let{gsap:e}=window;if(!e)return console.error("[ScrollCrafter] GSAP core not found! Make sure gsap.min.js is loaded."),null;if(window.ScrollTrigger&&e.registerPlugin)try{e.registerPlugin(window.ScrollTrigger)}catch(r){}return e}function v(){return typeof window=="undefined"?null:window.ScrollTrigger?window.ScrollTrigger:(console.warn("[ScrollCrafter] ScrollTrigger not found! Animations may not work."),null)}function q(e,r){if(typeof e!="string")return e;if(e==="calc_scroll_width_neg"&&(e="calc(sw * -1)"),e==="calc_scroll_width"&&(e="calc(sw)"),e==="calc_100vh"&&(e="calc(vh)"),e.match(/^calc\s*\((.*)\)$/i)){let t=e.match(/^calc\s*\((.*)\)$/i)[1];return t=t.replace(/(\d)\s*(sw|cw|ch|vw|vh)\b/gi,"$1 * $2"),(s,l)=>{let a=l||r,g=window.innerWidth,h=window.innerHeight,y=a.clientWidth||0,w=a.clientHeight||0,f=a.scrollWidth-y,S=f>0?f:0,x=(g-y)/2,i=(h-w)/2,n=g-y,o={sw:S,cw:y,ch:w,vw:g,vh:h,center:x,vcenter:i,end:n},d=t;if(Object.keys(o).forEach(u=>{let p=new RegExp(`\\b${u}\\b`,"gi");d=d.replace(p,"")}),!/^[0-9\.\+\-\*\/\(\)\s]*$/.test(d))return console.warn("[ScrollCrafter] Unsafe calc expression:",t),0;let c=t;Object.keys(o).sort((u,p)=>p.length-u.length).forEach(u=>{let p=new RegExp(`\\b${u}\\b`,"gi");c=c.replace(p,o[u])});try{return new Function("return "+c)()}catch(u){return console.error("[ScrollCrafter] Calc error:",u),0}}}return e}function O(e,r){if(!e||typeof e!="object")return e;let t={...e};return Object.keys(t).forEach(s=>{let l=t[s];if(l&&typeof l=="object"&&!Array.isArray(l)){t[s]=O(l,r);return}t[s]=q(l,r)}),t}E("scroll_animation",(e,r)=>{var x,i;let t=!!((x=window.ScrollCrafterConfig)!=null&&x.debug),s=`[ScrollCrafter][${r.id||"anim"}]`,l=(n,o)=>{var d,c,m;t&&(console.group(`${s} ${n}`),console.log("Method:",(d=o.animation)==null?void 0:d.method),console.log("Vars:",(c=o.animation)==null?void 0:c.vars),console.log("Vars2:",(m=o.animation)==null?void 0:m.vars2),console.log("Target:",o.target||r.target),console.groupEnd())};t&&console.log(`${s} RAW CONFIG`,r);let a;try{a=k(),v()}catch(n){t&&console.error(`${s} GSAP missing`,n);return}let g=(n,o)=>{let d=n.target||r.target||{},c=[];if(d.type==="wrapper"?c=[o]:d.selector?c=o.querySelectorAll(d.selector):c=[o],!c.length)return t&&console.warn(`${s} No elements found for selector:`,d.selector),null;let m=n.animation||{},u=m.method||"from",p=c[0];if(m.split&&window.SplitText)try{let $=new SplitText(c,{type:m.split});$.chars&&$.chars.length?c=$.chars:$.words&&$.words.length?c=$.words:$.lines&&$.lines.length&&(c=$.lines),c.length&&a.set(c,{display:"inline-block"})}catch($){console.warn(`${s} SplitText error:`,$)}let b=O({...m.vars},p),C=m.vars2?O({...m.vars2},p):null;return m.text&&(b.text=m.text),m.stagger&&typeof m.stagger=="object"&&(b.stagger=m.stagger),b.scrollTrigger&&(b.scrollTrigger.trigger=o,r.id&&(b.scrollTrigger.id="sc-"+r.id)),C&&C.scrollTrigger&&(C.scrollTrigger.trigger=o,r.id&&(C.scrollTrigger.id="sc-"+r.id)),u==="fromTo"&&C?a.fromTo(c,b,C):typeof a[u]=="function"?a[u](c,b):(t&&console.warn(`${s} Unknown GSAP method:`,u),null)},h=a.matchMedia(),w=[...((i=window.ScrollCrafterConfig)==null?void 0:i.breakpoints)||[]].sort((n,o)=>n.value-o.value),f=0,S=[];if(w.forEach(n=>{let o=f+1,d=n.value;f=d;let c=o===1?`(max-width: ${d}px)`:`(min-width: ${o}px) and (max-width: ${d}px)`;S.push({slug:n.key,query:c})}),S.push({slug:"_default_desktop",query:`(min-width: ${f+1}px)`}),S.forEach(n=>{h.add(n.query,()=>{let o=r.animation;n.slug!=="_default_desktop"&&r.media&&r.media[n.slug]?(o=r.media[n.slug],l(`Active: ${n.slug} (Override)`,{...r,animation:o})):l(`Active: ${n.slug} (Global)`,r),o&&g({...r,animation:o},e)})}),t&&r.media){let n=new Set(w.map(o=>o.key));Object.keys(r.media).forEach(o=>{n.has(o)||console.warn(`${s} Unknown breakpoint slug used:`,o)})}});function I(e,r){if(typeof e!="string")return e;if(e==="calc_scroll_width_neg"&&(e="calc(sw * -1)"),e==="calc_scroll_width"&&(e="calc(sw)"),e==="calc_100vh"&&(e="calc(vh)"),e.match(/^calc\s*\((.*)\)$/i)){let t=e.match(/^calc\s*\((.*)\)$/i)[1];return t=t.replace(/(\d)\s*(sw|cw|ch|vw|vh)\b/gi,"$1 * $2"),(s,l)=>{let a=l||r,g=window.innerWidth,h=window.innerHeight,y=a.clientWidth||0,w=a.clientHeight||0,f=a.scrollWidth-y,S=f>0?f:0,x=(g-y)/2,i=g-y,n=(h-w)/2,o={sw:S,cw:y,ch:w,vw:g,vh:h,center:x,vcenter:n,end:i},d=t;if(Object.keys(o).forEach(u=>{let p=new RegExp(`\\b${u}\\b`,"gi");d=d.replace(p,"")}),!/^[0-9\.\+\-\*\/\(\)\s]*$/.test(d))return console.warn("[ScrollCrafter] Unsafe characters in calc expression:",t),0;let c=t;Object.keys(o).sort((u,p)=>p.length-u.length).forEach(u=>{let p=new RegExp(`\\b${u}\\b`,"gi");c=c.replace(p,o[u])});try{return new Function("return "+c)()}catch(u){return console.error("[ScrollCrafter] Calc error:",u),0}}}return e}function A(e,r){if(!e||typeof e!="object")return e;let t={...e};return Object.keys(t).forEach(s=>{let l=t[s];if(l&&typeof l=="object"&&!Array.isArray(l)){t[s]=A(l,r);return}t[s]=I(l,r)}),t}function j(e,r,t,s,l,a){let g=e,h=r.target||t.target||{},y=[g];if(h.selector&&h.type!=="wrapper"){let i=g.querySelectorAll(h.selector);i.length&&(y=Array.from(i))}let w={...r.timelineVars||{}};w.defaults&&(w.defaults=A(w.defaults,g)),w.scrollTrigger||(w.scrollTrigger={});let f=w.scrollTrigger;f.trigger||(f.trigger=g),f.pin===!0&&(f.pin=g),f.pin&&a.set(f.pin,{transition:"none"}),typeof f.invalidateOnRefresh=="undefined"&&(f.invalidateOnRefresh=!0),typeof f.anticipatePin=="undefined"&&(f.anticipatePin=.5),t.id&&!f.id&&(f.id=`sc-${t.id}`);let S=a.timeline(w);return(r.steps||[]).forEach((i,n)=>{let o=i.method||"to",d=i.position;if(o==="addLabel"){let p=i.vars;typeof p=="string"&&S.addLabel(p,d);return}if(o==="call")return;let c=y;if(i.selector){let p=g.querySelectorAll(i.selector);if(!p.length){s&&console.warn(`${l} Step ${n+1}: selector "${i.selector}" not found`);return}c=Array.from(p)}let m=A(i.vars||{},g),u=i.vars2?A(i.vars2,g):null;try{o==="fromTo"&&u?S.fromTo(c,m,u,d):typeof S[o]=="function"&&S[o](c,m,d)}catch(p){s&&console.error(`${l} Error step ${n+1}`,p)}}),S}E("scroll_timeline",(e,r)=>{var S,x;let t=!!((S=window.ScrollCrafterConfig)!=null&&S.debug),s=`[ScrollCrafter][timeline:${r.id||"tl"}]`,l=(i,n)=>{t&&(console.group(`${s} ${i}`),console.log("Details:",n),console.groupEnd())},a;try{a=k(),v()}catch(i){t&&console.error(`${s} GSAP missing`,i);return}let g=a.matchMedia(),y=[...((x=window.ScrollCrafterConfig)==null?void 0:x.breakpoints)||[]].sort((i,n)=>i.value-n.value),w=0,f=[];if(y.forEach(i=>{let n=w+1,o=i.value;w=o;let d=n===1?`(max-width: ${o}px)`:`(min-width: ${n}px) and (max-width: ${o}px)`;f.push({slug:i.key,query:d})}),f.push({slug:"_default_desktop",query:`(min-width: ${w+1}px)`}),f.forEach(i=>{g.add(i.query,()=>{let n=r,o=!1;i.slug!=="_default_desktop"&&r.media&&r.media[i.slug]&&r.media[i.slug]&&(n=r.media[i.slug],o=!0),n&&n.steps&&n.steps.length>0&&(o?(l(`Active: ${i.slug} (Override)`,n),j(e,n,r,t,s+`[${i.slug}]`,a)):(l(`Active: ${i.slug} (Global)`,n),j(e,n,r,t,s,a)))})}),t&&r.media){let i=new Set(y.map(n=>n.key));Object.keys(r.media).forEach(n=>{i.has(n)||console.warn(`${s} Unknown breakpoint slug used:`,n)})}});function M(){T(document)}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",M):M();window.addEventListener("elementor/popup/show",e=>{T(e.target);let r=v();r&&r.refresh()});window.addEventListener("elementor/frontend/init",()=>{window.elementorFrontend&&elementorFrontend.hooks.addAction("frontend/element_ready/global",e=>{let r=e[0];if(elementorFrontend.isEditMode()){let t=r.getAttribute("data-id");t&&G(t)}T(r)})});function G(e){var r;try{let t=v();if(!t)return;let s="sc-"+e,l=t.getById(s);l&&((r=window.ScrollCrafterConfig)!=null&&r.debug&&console.log(`[ScrollCrafter] Killing trigger: ${s}`),l.kill(!0))}catch(t){console.warn("[ScrollCrafter] Error killing trigger:",t)}}})();
