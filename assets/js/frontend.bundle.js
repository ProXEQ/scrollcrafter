(()=>{var V={},Y=new WeakSet,O=new Map,q=new Set;function _(e,t){t?q.add(e):q.delete(e)}function I(e,t){V[e]=t}function W(e=document,t=!1){if(!e)return;let o=[];e.hasAttribute&&e.hasAttribute("data-scrollcrafter-config")&&o.push(e),e.querySelectorAll&&e.querySelectorAll("[data-scrollcrafter-config]").forEach(r=>o.push(r)),o.forEach(r=>{var c;let i=r.getAttribute("data-id");if(i&&q.has(i)){(c=window.ScrollCrafterConfig)!=null&&c.debug&&console.log(`[ScrollCrafter] Skipping init for ${i} - preview active`);return}let l=Y.has(r);if(!(!t&&l)){if(t&&i){O.has(i)&&clearTimeout(O.get(i)),O.set(i,setTimeout(()=>{O.delete(i),q.has(i)||X(r,t)},250));return}X(r,t)}})}function X(e,t){var l,c;if(typeof e.__sc_cleanup=="function"){try{e.__sc_cleanup()}catch(s){console.warn("[ScrollCrafter] Cleanup error:",s)}delete e.__sc_cleanup}let o=e.getAttribute("data-scrollcrafter-config");if(!o)return;let r;try{r=JSON.parse(o)}catch(s){(l=window.ScrollCrafterConfig)!=null&&l.debug&&console.warn("[ScrollCrafter] Invalid config JSON:",s,e);return}let i=r.widget;if(!(!i||typeof V[i]!="function"))try{(c=window.ScrollCrafterConfig)!=null&&c.debug&&console.log(`[ScrollCrafter] Initializing widget: "${i}"`,e);let s=V[i](e,r);typeof s=="function"&&(e.__sc_cleanup=s),Y.add(e),e.dispatchEvent(new CustomEvent("scrollcrafter:init",{bubbles:!0,detail:{type:i,config:r}}))}catch(s){console.error(`[ScrollCrafter] Init error for "${i}":`,s)}}function A(){if(typeof window=="undefined")return null;let{gsap:e}=window;if(!e)return console.error("[ScrollCrafter] GSAP core not found! Make sure gsap.min.js is loaded."),null;if(window.ScrollTrigger&&e.registerPlugin)try{e.registerPlugin(window.ScrollTrigger)}catch(t){}return e}function P(){return typeof window=="undefined"?null:window.ScrollTrigger?window.ScrollTrigger:(console.warn("[ScrollCrafter] ScrollTrigger not found! Animations may not work."),null)}var Z=new Map;function se(e,t){if(typeof e!="string")return e;e==="calc_scroll_width_neg"&&(e="calc(sw * -1)"),e==="calc_scroll_width"&&(e="calc(sw)"),e==="calc_100vh"&&(e="calc(vh)");let o=e.match(/^calc\s*\((.*)\)$/i);if(o){let r=o[1].replace(/(\d)\s*(sw|cw|ch|vw|vh)\b/gi,"$1 * $2");return(i,l)=>{let c=l||t,s=window.innerWidth,m=window.innerHeight,g=c.clientWidth||0,a=c.clientHeight||0,w={sw:Math.max(0,c.scrollWidth-g),cw:g,ch:a,vw:s,vh:m,center:(s-g)/2,vcenter:(m-a)/2,end:s-g},n=r;["vcenter","center","sw","cw","ch","vw","vh","end"].forEach(S=>{n=n.replace(new RegExp(`\\b${S}\\b`,"gi"),w[S])});let d=Z.get(n);if(!d){let S=n.replace(/[0-9\.\+\-\*\/\(\)\s]/g,"");if(S.length>0)return console.warn("[ScrollCrafter] Unsafe characters in result expression:",S),0;try{d=new Function("return "+n),Z.set(n,d)}catch(v){return console.error("[ScrollCrafter] Compile error:",v,n),0}}try{return d()}catch(S){return console.error("[ScrollCrafter] Calc exec error:",S),0}}}return e}function b(e,t){if(!e||typeof e!="object")return e;let o={...e};return Object.keys(o).forEach(r=>{let i=o[r];if(i&&typeof i=="object"&&!Array.isArray(i)){o[r]=b(i,t);return}o[r]=se(i,t)}),o}var j=null,F=null,ce={"reduced-motion":"(prefers-reduced-motion: reduce)"},ae={dark:"(prefers-color-scheme: dark)",retina:"(-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi)","no-hover":"(hover: none)"};function fe(){var i;let e=((i=window.ScrollCrafterConfig)==null?void 0:i.breakpoints)||[];if(!e.length)return[{slug:"_default_desktop",query:"(min-width: 1px)",min:1,max:1/0}];let t=[...e].sort((l,c)=>l.value-c.value),o=[],r=0;return t.forEach(l=>{let c=r+1,s=l.value;r=s;let m=c===1?`(max-width: ${s}px)`:`(min-width: ${c}px) and (max-width: ${s}px)`;o.push({slug:l.key,query:m,min:c,max:s})}),o.push({slug:"_default_desktop",query:`(min-width: ${r+1}px)`,min:r+1,max:1/0}),o}function D(){return j===null&&(j=fe()),j}function ue(){var e;return!!((e=window.ScrollCrafterConfig)!=null&&e.isPro)}function de(e){let t=ce[e];return!t&&ue()&&(t=ae[e]),t?(F===null&&(F={}),F[e]===void 0&&(F[e]=window.matchMedia(t).matches),F[e]):!1}function pe(){return de("reduced-motion")}function B(e,t){var o;if(e.disabled&&e.disabled.includes(t.slug))return null;if(pe()&&((o=e.conditions)!=null&&o["reduced-motion"]))return e.conditions["reduced-motion"];if(t.slug!=="_default_desktop"){if(e.conditions){for(let r of Object.values(e.conditions))if(r.tags&&r.tags.includes(t.slug))return r.config||r}if(e.media&&e.media[t.slug])return e.media[t.slug]}return e.animation||e}function G(e,t,o,r=null){var a,u,w;let i=!!((a=window.ScrollCrafterConfig)!=null&&a.debug),l=D(),c=[],s=t.disabled||[],m=((u=r==null?void 0:r.getAttribute)==null?void 0:u.call(r,"data-scrollcrafter-force-breakpoint"))||((w=r==null?void 0:r.attr)==null?void 0:w.call(r,"data-scrollcrafter-force-breakpoint"))||null;if(m){i&&console.log(`[SC Responsive] Force breakpoint detected: ${m}`);let n=l.find(f=>f.slug===m);if(!n&&m==="desktop"&&(n=l.find(f=>f.slug==="_default_desktop")),n&&!s.includes(n.slug)){let f=B(t,n);if(f){i&&console.log(`[SC Responsive] Active (forced): ${n.slug}`,f);let d=o(f,n);d&&c.push(d)}}return()=>(i&&console.log("[SC Responsive] Cleanup (forced mode - no matchMedia)"),c)}let g=e.matchMedia();return l.forEach(n=>{if(s.includes(n.slug)){i&&console.log(`[SC Responsive] Skipping disabled: ${n.slug}`);return}g.add(n.query,()=>{let f=B(t,n);if(f){i&&console.log(`[SC Responsive] Active: ${n.slug}`,f);let d=o(f,n);d&&c.push(d)}})}),()=>(i&&console.log("[SC Responsive] Cleaning up matchMedia contexts"),g.revert(),c)}I("scroll_animation",(e,t)=>{var a;let o=!!((a=window.ScrollCrafterConfig)!=null&&a.debug),r=`[ScrollCrafter][${t.id||"anim"}]`,i=(u,w)=>{var n,f,d;o&&(console.group(`${r} ${u}`),console.log("Method:",(n=w.animation)==null?void 0:n.method),console.log("Vars:",(f=w.animation)==null?void 0:f.vars),console.log("Vars2:",(d=w.animation)==null?void 0:d.vars2),console.log("Target:",w.target||t.target),console.groupEnd())};o&&console.log(`${r} RAW CONFIG`,t);let l;try{l=A(),P()}catch(u){o&&console.error(`${r} GSAP missing`,u);return}let c=(u,w)=>{var E,L,z,M,H,K,Q;let n=u.target||t.target||{},f=[];if(n.type==="wrapper"?f=[w]:n.selector?f=w.querySelectorAll(n.selector):f=[w],!f.length)return o&&console.warn(`${r} No elements found for selector:`,n.selector),null;let d=u.animation||{},S=d.method||"from",v=f[0];if(d.split)if(o&&console.log(`${r} SplitText requested: ${d.split}, SplitText available: ${typeof window.SplitText}`),window.SplitText)try{let $=d.split.toLowerCase(),k=(E=f[0])==null?void 0:E._splitText,U=(L=f[0])==null?void 0:L._splitTextType,x,le=U===$;k&&(((z=k.chars)==null?void 0:z.length)||((M=k.words)==null?void 0:M.length)||((H=k.lines)==null?void 0:H.length))&&le?(o&&console.log(`${r} Reusing existing SplitText (type: ${U})`),x=k):(k?(o&&console.log(`${r} Type mismatch (${U} vs ${$}), reverting and creating new`),k.revert()):o&&console.log(`${r} Creating fresh SplitText`),x=new SplitText(f,{type:$}),f.forEach(J=>{J._splitText=x,J._splitTextType=$})),$.includes("char")&&x.chars&&x.chars.length?f=x.chars:$.includes("word")&&x.words&&x.words.length?f=x.words:$.includes("line")&&x.lines&&x.lines.length&&(f=x.lines),o&&console.log(`${r} SplitText elements count: ${f.length}`),f.length&&l.set(f,{display:"inline-block"})}catch($){console.warn(`${r} SplitText error:`,$)}else console.warn(`${r} SplitText not available! Make sure GSAP SplitText is loaded.`);let T=b({...d.vars},v),h=d.vars2?b({...d.vars2},v):null;l.set(f,{transition:"none",translate:"none",rotate:"none",scale:"none"}),T.scrollTrigger&&(T.scrollTrigger.trigger=w,t.id&&(T.scrollTrigger.id="sc-"+t.id)),h&&h.scrollTrigger&&(h.scrollTrigger.trigger=w,t.id&&(h.scrollTrigger.id="sc-"+t.id)),o&&(console.log(`${r} CreateTween: method=${S}, elements=${f.length}`,f),console.log(`${r} Stagger Value:`,(Q=(K=T.stagger)!=null?K:d.stagger)!=null?Q:"none"),console.log(`${r} Vars:`,T),h&&console.log(`${r} Vars2 (To):`,h)),S==="from"?T.immediateRender===void 0&&(T.immediateRender=!0):S==="fromTo"&&h&&h.immediateRender===void 0&&(h.immediateRender=!0);let p;return S==="fromTo"&&h?p=l.fromTo(f,T,h):typeof l[S]=="function"&&(p=l[S](f,T)),p&&(S==="from"||S==="fromTo")&&p.progress(1).progress(0),!p&&o&&console.warn(`${r} Unknown GSAP method:`,S),p},s=[],m=u=>{if((window.ScrollCrafterForcePreview===t.id||window.parent&&window.parent.ScrollCrafterForcePreview===t.id||e.getAttribute("data-sc-preview")==="yes")&&u)if(o&&console.log(`${r} Manual preview detected, force playing animation`),u.scrollTrigger){let n=u.scrollTrigger;n.pin||n.vars&&n.vars.scrub?(o&&console.log(`${r} Pin/Scrub detected, animating progress`),l.fromTo(n,{progress:0},{progress:1,duration:1.5,ease:"power1.inOut"})):(n.disable(),u.restart(!0))}else u.restart(!0)},g=G(l,t,(u,w)=>{i(`Active: ${w.slug}`,{...t,animation:u});let n=c({...t,animation:u},e);return n&&(s.push(n),m(n)),n},e);return()=>{o&&console.log(`${r} Cleaning up...`),g(),s.forEach(u=>{u.scrollTrigger&&u.scrollTrigger.kill(!0),u.kill()})}});function ge(e,t,o,r,i,l){let c=e,s=t.target||o.target||{},m=[c];if(s.selector&&s.type!=="wrapper"){let n=c.querySelectorAll(s.selector);n.length&&(m=Array.from(n))}let g={...t.timelineVars||{}};g.defaults&&(g.defaults=b(g.defaults,c)),g.scrollTrigger||(g.scrollTrigger={});let a=g.scrollTrigger;a.trigger||(a.trigger=c),a.pin===!0&&(a.pin=c),a.pin&&l.set(a.pin,{transition:"none"}),typeof a.invalidateOnRefresh=="undefined"&&(a.invalidateOnRefresh=!0),typeof a.anticipatePin=="undefined"&&(a.anticipatePin=.5),o.id&&!a.id&&(a.id=`sc-${o.id}`);let u=l.timeline(g);return(t.steps||[]).forEach((n,f)=>{let d=n.method||"to",S=n.position;if(d==="addLabel"){let p=n.vars;typeof p=="string"&&u.addLabel(p,S);return}if(d==="call")return;let v=m;if(n.selector){let p=c.querySelectorAll(n.selector);if(!p.length){r&&console.warn(`${i} Step ${f+1}: selector "${n.selector}" not found`);return}v=Array.from(p)}let T=b(n.vars||{},c),h=n.vars2?b(n.vars2,c):null;if(l.set(v,{transition:"none",translate:"none",rotate:"none",scale:"none"}),n.split&&window.SplitText)try{let p=new SplitText(v,{type:n.split});p.chars&&p.chars.length?v=p.chars:p.words&&p.words.length?v=p.words:p.lines&&p.lines.length&&(v=p.lines),v.length&&l.set(v,{display:"inline-block"})}catch(p){r&&console.warn(`${i} SplitText error:`,p)}r&&console.log(`${i} Step ${f+1}: method=${d}, targets=${v.length}`,v),d==="from"?T.immediateRender===void 0&&(T.immediateRender=!0):d==="fromTo"&&h&&h.immediateRender===void 0&&(h.immediateRender=!0);try{let p;d==="fromTo"&&h?p=u.fromTo(v,T,h,S):typeof u[d]=="function"&&(p=u[d](v,T,S))}catch(p){r&&console.error(`${i} Error step ${f+1}`,p)}}),u}I("scroll_timeline",(e,t)=>{var g;let o=!!((g=window.ScrollCrafterConfig)!=null&&g.debug),r=`[ScrollCrafter][timeline:${t.id||"tl"}]`,i=(a,u)=>{o&&(console.group(`${r} ${a}`),console.log("Details:",u),console.groupEnd())},l;try{l=A(),P()}catch(a){o&&console.error(`${r} GSAP missing`,a);return}let c=[],s=a=>{if((window.ScrollCrafterForcePreview===t.id||window.parent&&window.parent.ScrollCrafterForcePreview===t.id||e.getAttribute("data-sc-preview")==="yes")&&a)if(o&&console.log(`${r} Manual preview detected, force playing timeline`),a.scrollTrigger){let w=a.scrollTrigger;w.pin||w.vars&&w.vars.scrub?(o&&console.log(`${r} Pin/Scrub detected, animating progress`),l.fromTo(w,{progress:0},{progress:1,duration:1.5,ease:"power1.inOut"})):(w.disable(),a.restart(!0))}else a.restart(!0)},m=G(l,t,(a,u)=>{let w=a.steps?a:t;if(!w.steps||w.steps.length===0)return null;i(`Active: ${u.slug}`,a);let n=ge(e,w,t,o,r+`[${u.slug}]`,l);return n&&(c.push(n),s(n)),n},e);return()=>{o&&console.log(`${r} Cleaning up...`),m(),c.forEach(a=>{a.scrollTrigger&&a.scrollTrigger.kill(!0),a.kill()})}});var ee,we=!!((ee=window.ScrollCrafterConfig)!=null&&ee.debug),C=(...e)=>we&&console.log("[SC Preview]",...e),R=new Map;function N(e,t=!0){if(R.has(e)){let{tween:o,elements:r}=R.get(e);if(C(`Cleaning up existing preview for ${e}`),o&&(o.scrollTrigger&&o.scrollTrigger.kill(!0),o.progress(1),o.kill()),r&&r.length){let i=A();i&&i.set(r,{clearProps:"all"})}R.delete(e)}t&&(_(e,!1),C(`Preview lock released for ${e}`))}function me(e,t,o){var u,w,n,f,d,S,v,T;let r=A();if(!r)return console.error("[SC Preview] GSAP not available"),null;let i=o.target||{},l=[];if(i.type==="wrapper"?l=[e]:i.selector?l=e.querySelectorAll(i.selector):l=[e],!l.length)return C("No target elements found"),null;let c=t.method||"from",s=null;if(t.split&&window.SplitText)try{let h=t.split.toLowerCase(),p=(u=l[0])==null?void 0:u._splitText,E=(w=l[0])==null?void 0:w._splitTextType,L=E===h;p&&(((n=p.chars)==null?void 0:n.length)||((f=p.words)==null?void 0:f.length)||((d=p.lines)==null?void 0:d.length))&&L?(C(`Reusing existing SplitText (type: ${E})`),s=p):(p?(C(`Type mismatch (${E} vs ${h}), reverting and creating new`),p.revert()):C("Creating fresh SplitText with type:",h),s=new SplitText(l,{type:h}),C("SplitText result:",{chars:((S=s.chars)==null?void 0:S.length)||0,words:((v=s.words)==null?void 0:v.length)||0,lines:((T=s.lines)==null?void 0:T.length)||0}),l.forEach(M=>{M._splitText=s,M._splitTextType=h})),h.includes("char")&&s.chars&&s.chars.length>0?l=s.chars:h.includes("word")&&s.words&&s.words.length>0?l=s.words:h.includes("line")&&s.lines&&s.lines.length>0&&(l=s.lines),C(`SplitText: ${l.length} elements (type: ${h})`),l.length>0&&r.set(l,{display:"inline-block"})}catch(h){console.warn("[SC Preview] SplitText error:",h)}let m=b({...t.vars},l[0]),g=t.vars2?b({...t.vars2},l[0]):null;r.set(l,{transition:"none",translate:"none",rotate:"none",scale:"none"}),delete m.scrollTrigger,g&&delete g.scrollTrigger,c==="from"&&m.immediateRender===void 0&&(m.immediateRender=!0),C(`Creating ${c} tween for ${l.length} elements`);let a;return c==="fromTo"&&g?a=r.fromTo(l,m,g):typeof r[c]=="function"&&(a=r[c](l,m)),a&&(c==="from"||c==="fromTo")&&a.progress(1).progress(0),{tween:a,elements:l}}function he(e,t,o){C(`Preview requested: widget=${e}, breakpoint=${o}`),_(e,!0),C(`Preview lock acquired for ${e}`);let r=document.querySelector(`[data-id="${e}"]`);if(!r)return console.error(`[SC Preview] Widget ${e} not found in DOM`),_(e,!1),!1;N(e,!1);let i=D(),l=i.find(g=>g.slug===o);!l&&o==="desktop"&&(l=i.find(g=>g.slug==="_default_desktop")),l||(l=i[0]);let c=B(t,l);if(!c)return C("No active config for breakpoint:",o),_(e,!1),!1;C("Active config:",c);let s=me(r,c,t);if(!s||!s.tween)return C("Failed to create animation"),_(e,!1),!1;R.set(e,s);let m=s.tween.vars.onComplete;return s.tween.vars.onComplete=function(){C(`Preview animation completed for ${e}`),m&&m.apply(this,arguments),setTimeout(()=>{_(e,!1),C(`Preview lock released for ${e}`)},2e3)},C("Playing animation"),s.tween.restart(!0),!0}function Se(){C(`Cleaning up all previews (${R.size} active)`);for(let e of R.keys())N(e,!0)}window.scPreview=he;window.scPreviewCleanup=N;window.scPreviewCleanupAll=Se;C("Direct Preview API initialized");var y=null;function oe(e={}){var r;if(typeof window.Lenis=="undefined")return console.warn("[ScrollCrafter] Lenis not loaded. Smooth scroll unavailable."),null;if(y)return console.log("[ScrollCrafter] Lenis already initialized, returning existing instance."),y;let o={...{lerp:.1,duration:1.2,smoothWheel:!0,smoothTouch:!1,wheelMultiplier:1,touchMultiplier:2,infinite:!1},...e};try{return y=new window.Lenis(o),window.gsap&&(window.gsap.ticker.add(i=>{y.raf(i*1e3)}),window.gsap.ticker.lagSmoothing(0)),window.ScrollTrigger&&(y.on("scroll",window.ScrollTrigger.update),window.addEventListener("resize",()=>{window.ScrollTrigger.refresh()})),(r=window.ScrollCrafterConfig)!=null&&r.debug&&console.log("[ScrollCrafter] Lenis smooth scroll initialized",o),y}catch(i){return console.error("[ScrollCrafter] Failed to initialize Lenis:",i),null}}function ve(){var e;y&&(y.destroy(),y=null,(e=window.ScrollCrafterConfig)!=null&&e.debug&&console.log("[ScrollCrafter] Lenis destroyed"))}function Ce(){return y}function Te(){y&&y.stop()}function ye(){y&&y.start()}function xe(e,t={}){y&&y.scrollTo(e,{offset:0,duration:1.2,easing:o=>Math.min(1,1.001-Math.pow(2,-10*o)),...t})}var re,te;if(typeof window!="undefined"&&((te=(re=window.ScrollCrafterConfig)==null?void 0:re.smoothScroll)==null?void 0:te.enabled)){let t=()=>{var r,i;let o=((i=(r=window.ScrollCrafterConfig)==null?void 0:r.smoothScroll)==null?void 0:i.options)||{};oe(o)};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",t):setTimeout(t,100)}typeof window!="undefined"&&(window.ScrollCrafterSmooth={init:oe,destroy:ve,getInstance:Ce,pause:Te,resume:ye,scrollTo:xe});function ne(){W(document)}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",ne):ne();window.addEventListener("elementor/popup/show",e=>{W(e.target);let t=P();t&&t.refresh()});var ie=()=>{let e=0,t=50,o=()=>{var l,c,s;if(!window.elementorFrontend||!window.elementorFrontend.hooks){e++,e<t?(e%10===0&&((l=window.ScrollCrafterConfig)!=null&&l.debug)&&console.log(`[ScrollCrafter] Still waiting for elementorFrontend hooks (attempt ${e})...`),setTimeout(o,100)):console.warn("[ScrollCrafter] Elementor hooks not found after 5s. Animations might not initialize.");return}(c=window.ScrollCrafterConfig)!=null&&c.debug&&console.log("[ScrollCrafter] Elementor hooks found. Registering...");let r,i=()=>{clearTimeout(r),r=setTimeout(()=>{var g;let m=P();m&&((g=window.ScrollCrafterConfig)!=null&&g.debug&&console.log("[ScrollCrafter] Debounced Refresh"),m.refresh())},200)};elementorFrontend.hooks.addAction("frontend/element_ready/global",m=>{var a;let g=m[0];if(g){if(elementorFrontend.isEditMode()){let u=g.getAttribute("data-id");u&&be(u);let w=d=>{try{if(window.ScrollCrafterForcePreview===d||window.parent&&window.parent.ScrollCrafterForcePreview===d||window.top&&window.top.ScrollCrafterForcePreview===d||sessionStorage.getItem("sc_force_preview")===d)return!0}catch(S){}return!1},n=!!((a=window.ScrollCrafterConfig)!=null&&a.enableEditorAnimations),f=g.getAttribute("data-sc-preview")==="yes"||w(u);if(!n&&!f)return;f&&setTimeout(()=>{window.ScrollCrafterForcePreview===u&&(window.ScrollCrafterForcePreview=!1),window.parent&&window.parent.ScrollCrafterForcePreview===u&&(window.parent.ScrollCrafterForcePreview=!1),window.top&&window.top.ScrollCrafterForcePreview===u&&(window.top.ScrollCrafterForcePreview=!1),sessionStorage.removeItem("sc_force_preview")},100)}W(g,elementorFrontend.isEditMode()),elementorFrontend.isEditMode()&&i()}}),(s=window.ScrollCrafterConfig)!=null&&s.debug&&console.log("[ScrollCrafter] Elementor hooks registered successfully")};o()};ie();window.addEventListener("elementor/frontend/init",ie);function be(e){var t;try{let o=P();if(!o)return;let r="sc-"+e,i=o.getById(r);i&&((t=window.ScrollCrafterConfig)!=null&&t.debug&&console.log(`[ScrollCrafter] Killing trigger: ${r}`),i.kill(!0))}catch(o){console.warn("[ScrollCrafter] Error killing trigger:",o)}}})();
