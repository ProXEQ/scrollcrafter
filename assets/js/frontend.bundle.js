(()=>{var V={},X=new WeakSet,q=new Map,O=new Set;function k(e,t){t?O.add(e):O.delete(e)}function L(e,t){V[e]=t}function W(e=document,t=!1){if(!e)return;let o=[];e.hasAttribute&&e.hasAttribute("data-scrollcrafter-config")&&o.push(e),e.querySelectorAll&&e.querySelectorAll("[data-scrollcrafter-config]").forEach(r=>o.push(r)),o.forEach(r=>{var c;let s=r.getAttribute("data-id");if(s&&O.has(s)){(c=window.ScrollCrafterConfig)!=null&&c.debug&&console.log(`[ScrollCrafter] Skipping init for ${s} - preview active`);return}let i=X.has(r);if(!(!t&&i)){if(t&&s){q.has(s)&&clearTimeout(q.get(s)),q.set(s,setTimeout(()=>{q.delete(s),O.has(s)||J(r,t)},250));return}J(r,t)}})}function J(e,t){var i,c;if(typeof e.__sc_cleanup=="function"){try{e.__sc_cleanup()}catch(l){console.warn("[ScrollCrafter] Cleanup error:",l)}delete e.__sc_cleanup}let o=e.getAttribute("data-scrollcrafter-config");if(!o)return;let r;try{r=JSON.parse(o)}catch(l){(i=window.ScrollCrafterConfig)!=null&&i.debug&&console.warn("[ScrollCrafter] Invalid config JSON:",l,e);return}let s=r.widget;if(!(!s||typeof V[s]!="function"))try{(c=window.ScrollCrafterConfig)!=null&&c.debug&&console.log(`[ScrollCrafter] Initializing widget: "${s}"`,e);let l=V[s](e,r);typeof l=="function"&&(e.__sc_cleanup=l),X.add(e),e.dispatchEvent(new CustomEvent("scrollcrafter:init",{bubbles:!0,detail:{type:s,config:r}}))}catch(l){console.error(`[ScrollCrafter] Init error for "${s}":`,l)}}function _(){if(typeof window=="undefined")return null;let{gsap:e}=window;if(!e)return console.error("[ScrollCrafter] GSAP core not found! Make sure gsap.min.js is loaded."),null;if(window.ScrollTrigger&&e.registerPlugin)try{e.registerPlugin(window.ScrollTrigger)}catch(t){}return e}function b(){return typeof window=="undefined"?null:window.ScrollTrigger?window.ScrollTrigger:(console.warn("[ScrollCrafter] ScrollTrigger not found! Animations may not work."),null)}var Y=new Map;function oe(e,t){if(typeof e!="string")return e;e==="calc_scroll_width_neg"&&(e="calc(sw * -1)"),e==="calc_scroll_width"&&(e="calc(sw)"),e==="calc_100vh"&&(e="calc(vh)");let o=e.match(/^calc\s*\((.*)\)$/i);if(o){let r=o[1].replace(/(\d)\s*(sw|cw|ch|vw|vh)\b/gi,"$1 * $2");return(s,i)=>{let c=i||t,l=window.innerWidth,m=window.innerHeight,g=c.clientWidth||0,a=c.clientHeight||0,w={sw:Math.max(0,c.scrollWidth-g),cw:g,ch:a,vw:l,vh:m,center:(l-g)/2,vcenter:(m-a)/2,end:l-g},n=r;["vcenter","center","sw","cw","ch","vw","vh","end"].forEach(S=>{n=n.replace(new RegExp(`\\b${S}\\b`,"gi"),w[S])});let d=Y.get(n);if(!d){let S=n.replace(/[0-9\.\+\-\*\/\(\)\s]/g,"");if(S.length>0)return console.warn("[ScrollCrafter] Unsafe characters in result expression:",S),0;try{d=new Function("return "+n),Y.set(n,d)}catch(v){return console.error("[ScrollCrafter] Compile error:",v,n),0}}try{return d()}catch(S){return console.error("[ScrollCrafter] Calc exec error:",S),0}}}return e}function x(e,t){if(!e||typeof e!="object")return e;let o={...e};return Object.keys(o).forEach(r=>{let s=o[r];if(s&&typeof s=="object"&&!Array.isArray(s)){o[r]=x(s,t);return}o[r]=oe(s,t)}),o}var j=null,M=null,ne={"reduced-motion":"(prefers-reduced-motion: reduce)"},ie={dark:"(prefers-color-scheme: dark)",retina:"(-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi)","no-hover":"(hover: none)"};function se(){var s;let e=((s=window.ScrollCrafterConfig)==null?void 0:s.breakpoints)||[];if(!e.length)return[{slug:"_default_desktop",query:"(min-width: 1px)",min:1,max:1/0}];let t=[...e].sort((i,c)=>i.value-c.value),o=[],r=0;return t.forEach(i=>{let c=r+1,l=i.value;r=l;let m=c===1?`(max-width: ${l}px)`:`(min-width: ${c}px) and (max-width: ${l}px)`;o.push({slug:i.key,query:m,min:c,max:l})}),o.push({slug:"_default_desktop",query:`(min-width: ${r+1}px)`,min:r+1,max:1/0}),o}function z(){return j===null&&(j=se()),j}function le(e){let t=ne[e]||ie[e];return t?(M===null&&(M={}),M[e]===void 0&&(M[e]=window.matchMedia(t).matches),M[e]):!1}function ce(){return le("reduced-motion")}function B(e,t){var o;if(e.disabled&&e.disabled.includes(t.slug))return null;if(ce()&&((o=e.conditions)!=null&&o["reduced-motion"]))return e.conditions["reduced-motion"];if(t.slug!=="_default_desktop"){if(e.conditions){for(let r of Object.values(e.conditions))if(r.tags&&r.tags.includes(t.slug))return r.config||r}if(e.media&&e.media[t.slug])return e.media[t.slug]}return e.animation||e}function G(e,t,o,r=null){var a,u,w;let s=!!((a=window.ScrollCrafterConfig)!=null&&a.debug),i=z(),c=[],l=t.disabled||[],m=((u=r==null?void 0:r.getAttribute)==null?void 0:u.call(r,"data-scrollcrafter-force-breakpoint"))||((w=r==null?void 0:r.attr)==null?void 0:w.call(r,"data-scrollcrafter-force-breakpoint"))||null;if(m){s&&console.log(`[SC Responsive] Force breakpoint detected: ${m}`);let n=i.find(f=>f.slug===m);if(!n&&m==="desktop"&&(n=i.find(f=>f.slug==="_default_desktop")),n&&!l.includes(n.slug)){let f=B(t,n);if(f){s&&console.log(`[SC Responsive] Active (forced): ${n.slug}`,f);let d=o(f,n);d&&c.push(d)}}return()=>(s&&console.log("[SC Responsive] Cleanup (forced mode - no matchMedia)"),c)}let g=e.matchMedia();return i.forEach(n=>{if(l.includes(n.slug)){s&&console.log(`[SC Responsive] Skipping disabled: ${n.slug}`);return}g.add(n.query,()=>{let f=B(t,n);if(f){s&&console.log(`[SC Responsive] Active: ${n.slug}`,f);let d=o(f,n);d&&c.push(d)}})}),()=>(s&&console.log("[SC Responsive] Cleaning up matchMedia contexts"),g.revert(),c)}L("scroll_animation",(e,t)=>{var a;let o=!!((a=window.ScrollCrafterConfig)!=null&&a.debug),r=`[ScrollCrafter][${t.id||"anim"}]`,s=(u,w)=>{var n,f,d;o&&(console.group(`${r} ${u}`),console.log("Method:",(n=w.animation)==null?void 0:n.method),console.log("Vars:",(f=w.animation)==null?void 0:f.vars),console.log("Vars2:",(d=w.animation)==null?void 0:d.vars2),console.log("Target:",w.target||t.target),console.groupEnd())};o&&console.log(`${r} RAW CONFIG`,t);let i;try{i=_(),b()}catch(u){o&&console.error(`${r} GSAP missing`,u);return}let c=(u,w)=>{var A,F,I,E,N,H,K;let n=u.target||t.target||{},f=[];if(n.type==="wrapper"?f=[w]:n.selector?f=w.querySelectorAll(n.selector):f=[w],!f.length)return o&&console.warn(`${r} No elements found for selector:`,n.selector),null;let d=u.animation||{},S=d.method||"from",v=f[0];if(d.split)if(o&&console.log(`${r} SplitText requested: ${d.split}, SplitText available: ${typeof window.SplitText}`),window.SplitText)try{let $=d.split.toLowerCase(),P=(A=f[0])==null?void 0:A._splitText,U=(F=f[0])==null?void 0:F._splitTextType,y,te=U===$;P&&(((I=P.chars)==null?void 0:I.length)||((E=P.words)==null?void 0:E.length)||((N=P.lines)==null?void 0:N.length))&&te?(o&&console.log(`${r} Reusing existing SplitText (type: ${U})`),y=P):(P?(o&&console.log(`${r} Type mismatch (${U} vs ${$}), reverting and creating new`),P.revert()):o&&console.log(`${r} Creating fresh SplitText`),y=new SplitText(f,{type:$}),f.forEach(Q=>{Q._splitText=y,Q._splitTextType=$})),$.includes("char")&&y.chars&&y.chars.length?f=y.chars:$.includes("word")&&y.words&&y.words.length?f=y.words:$.includes("line")&&y.lines&&y.lines.length&&(f=y.lines),o&&console.log(`${r} SplitText elements count: ${f.length}`),f.length&&i.set(f,{display:"inline-block"})}catch($){console.warn(`${r} SplitText error:`,$)}else console.warn(`${r} SplitText not available! Make sure GSAP SplitText is loaded.`);let T=x({...d.vars},v),h=d.vars2?x({...d.vars2},v):null;i.set(f,{transition:"none",translate:"none",rotate:"none",scale:"none"}),T.scrollTrigger&&(T.scrollTrigger.trigger=w,t.id&&(T.scrollTrigger.id="sc-"+t.id)),h&&h.scrollTrigger&&(h.scrollTrigger.trigger=w,t.id&&(h.scrollTrigger.id="sc-"+t.id)),o&&(console.log(`${r} CreateTween: method=${S}, elements=${f.length}`,f),console.log(`${r} Stagger Value:`,(K=(H=T.stagger)!=null?H:d.stagger)!=null?K:"none"),console.log(`${r} Vars:`,T),h&&console.log(`${r} Vars2 (To):`,h)),S==="from"?T.immediateRender===void 0&&(T.immediateRender=!0):S==="fromTo"&&h&&h.immediateRender===void 0&&(h.immediateRender=!0);let p;return S==="fromTo"&&h?p=i.fromTo(f,T,h):typeof i[S]=="function"&&(p=i[S](f,T)),p&&(S==="from"||S==="fromTo")&&p.progress(1).progress(0),!p&&o&&console.warn(`${r} Unknown GSAP method:`,S),p},l=[],m=u=>{if((window.ScrollCrafterForcePreview===t.id||window.parent&&window.parent.ScrollCrafterForcePreview===t.id||e.getAttribute("data-sc-preview")==="yes")&&u)if(o&&console.log(`${r} Manual preview detected, force playing animation`),u.scrollTrigger){let n=u.scrollTrigger;n.pin||n.vars&&n.vars.scrub?(o&&console.log(`${r} Pin/Scrub detected, animating progress`),i.fromTo(n,{progress:0},{progress:1,duration:1.5,ease:"power1.inOut"})):(n.disable(),u.restart(!0))}else u.restart(!0)},g=G(i,t,(u,w)=>{s(`Active: ${w.slug}`,{...t,animation:u});let n=c({...t,animation:u},e);return n&&(l.push(n),m(n)),n},e);return()=>{o&&console.log(`${r} Cleaning up...`),g(),l.forEach(u=>{u.scrollTrigger&&u.scrollTrigger.kill(!0),u.kill()})}});function ae(e,t,o,r,s,i){let c=e,l=t.target||o.target||{},m=[c];if(l.selector&&l.type!=="wrapper"){let n=c.querySelectorAll(l.selector);n.length&&(m=Array.from(n))}let g={...t.timelineVars||{}};g.defaults&&(g.defaults=x(g.defaults,c)),g.scrollTrigger||(g.scrollTrigger={});let a=g.scrollTrigger;a.trigger||(a.trigger=c),a.pin===!0&&(a.pin=c),a.pin&&i.set(a.pin,{transition:"none"}),typeof a.invalidateOnRefresh=="undefined"&&(a.invalidateOnRefresh=!0),typeof a.anticipatePin=="undefined"&&(a.anticipatePin=.5),o.id&&!a.id&&(a.id=`sc-${o.id}`);let u=i.timeline(g);return(t.steps||[]).forEach((n,f)=>{let d=n.method||"to",S=n.position;if(d==="addLabel"){let p=n.vars;typeof p=="string"&&u.addLabel(p,S);return}if(d==="call")return;let v=m;if(n.selector){let p=c.querySelectorAll(n.selector);if(!p.length){r&&console.warn(`${s} Step ${f+1}: selector "${n.selector}" not found`);return}v=Array.from(p)}let T=x(n.vars||{},c),h=n.vars2?x(n.vars2,c):null;if(i.set(v,{transition:"none",translate:"none",rotate:"none",scale:"none"}),n.split&&window.SplitText)try{let p=new SplitText(v,{type:n.split});p.chars&&p.chars.length?v=p.chars:p.words&&p.words.length?v=p.words:p.lines&&p.lines.length&&(v=p.lines),v.length&&i.set(v,{display:"inline-block"})}catch(p){r&&console.warn(`${s} SplitText error:`,p)}r&&console.log(`${s} Step ${f+1}: method=${d}, targets=${v.length}`,v),d==="from"?T.immediateRender===void 0&&(T.immediateRender=!0):d==="fromTo"&&h&&h.immediateRender===void 0&&(h.immediateRender=!0);try{let p;d==="fromTo"&&h?p=u.fromTo(v,T,h,S):typeof u[d]=="function"&&(p=u[d](v,T,S))}catch(p){r&&console.error(`${s} Error step ${f+1}`,p)}}),u}L("scroll_timeline",(e,t)=>{var g;let o=!!((g=window.ScrollCrafterConfig)!=null&&g.debug),r=`[ScrollCrafter][timeline:${t.id||"tl"}]`,s=(a,u)=>{o&&(console.group(`${r} ${a}`),console.log("Details:",u),console.groupEnd())},i;try{i=_(),b()}catch(a){o&&console.error(`${r} GSAP missing`,a);return}let c=[],l=a=>{if((window.ScrollCrafterForcePreview===t.id||window.parent&&window.parent.ScrollCrafterForcePreview===t.id||e.getAttribute("data-sc-preview")==="yes")&&a)if(o&&console.log(`${r} Manual preview detected, force playing timeline`),a.scrollTrigger){let w=a.scrollTrigger;w.pin||w.vars&&w.vars.scrub?(o&&console.log(`${r} Pin/Scrub detected, animating progress`),i.fromTo(w,{progress:0},{progress:1,duration:1.5,ease:"power1.inOut"})):(w.disable(),a.restart(!0))}else a.restart(!0)},m=G(i,t,(a,u)=>{let w=a.steps?a:t;if(!w.steps||w.steps.length===0)return null;s(`Active: ${u.slug}`,a);let n=ae(e,w,t,o,r+`[${u.slug}]`,i);return n&&(c.push(n),l(n)),n},e);return()=>{o&&console.log(`${r} Cleaning up...`),m(),c.forEach(a=>{a.scrollTrigger&&a.scrollTrigger.kill(!0),a.kill()})}});var Z,fe=!!((Z=window.ScrollCrafterConfig)!=null&&Z.debug),C=(...e)=>fe&&console.log("[SC Preview]",...e),R=new Map;function D(e,t=!0){if(R.has(e)){let{tween:o,elements:r}=R.get(e);if(C(`Cleaning up existing preview for ${e}`),o&&(o.scrollTrigger&&o.scrollTrigger.kill(!0),o.progress(1),o.kill()),r&&r.length){let s=_();s&&s.set(r,{clearProps:"all"})}R.delete(e)}t&&(k(e,!1),C(`Preview lock released for ${e}`))}function ue(e,t,o){var u,w,n,f,d,S,v,T;let r=_();if(!r)return console.error("[SC Preview] GSAP not available"),null;let s=o.target||{},i=[];if(s.type==="wrapper"?i=[e]:s.selector?i=e.querySelectorAll(s.selector):i=[e],!i.length)return C("No target elements found"),null;let c=t.method||"from",l=null;if(t.split&&window.SplitText)try{let h=t.split.toLowerCase(),p=(u=i[0])==null?void 0:u._splitText,A=(w=i[0])==null?void 0:w._splitTextType,F=A===h;p&&(((n=p.chars)==null?void 0:n.length)||((f=p.words)==null?void 0:f.length)||((d=p.lines)==null?void 0:d.length))&&F?(C(`Reusing existing SplitText (type: ${A})`),l=p):(p?(C(`Type mismatch (${A} vs ${h}), reverting and creating new`),p.revert()):C("Creating fresh SplitText with type:",h),l=new SplitText(i,{type:h}),C("SplitText result:",{chars:((S=l.chars)==null?void 0:S.length)||0,words:((v=l.words)==null?void 0:v.length)||0,lines:((T=l.lines)==null?void 0:T.length)||0}),i.forEach(E=>{E._splitText=l,E._splitTextType=h})),h.includes("char")&&l.chars&&l.chars.length>0?i=l.chars:h.includes("word")&&l.words&&l.words.length>0?i=l.words:h.includes("line")&&l.lines&&l.lines.length>0&&(i=l.lines),C(`SplitText: ${i.length} elements (type: ${h})`),i.length>0&&r.set(i,{display:"inline-block"})}catch(h){console.warn("[SC Preview] SplitText error:",h)}let m=x({...t.vars},i[0]),g=t.vars2?x({...t.vars2},i[0]):null;r.set(i,{transition:"none",translate:"none",rotate:"none",scale:"none"}),delete m.scrollTrigger,g&&delete g.scrollTrigger,c==="from"&&m.immediateRender===void 0&&(m.immediateRender=!0),C(`Creating ${c} tween for ${i.length} elements`);let a;return c==="fromTo"&&g?a=r.fromTo(i,m,g):typeof r[c]=="function"&&(a=r[c](i,m)),a&&(c==="from"||c==="fromTo")&&a.progress(1).progress(0),{tween:a,elements:i}}function de(e,t,o){C(`Preview requested: widget=${e}, breakpoint=${o}`),k(e,!0),C(`Preview lock acquired for ${e}`);let r=document.querySelector(`[data-id="${e}"]`);if(!r)return console.error(`[SC Preview] Widget ${e} not found in DOM`),k(e,!1),!1;D(e,!1);let s=z(),i=s.find(g=>g.slug===o);!i&&o==="desktop"&&(i=s.find(g=>g.slug==="_default_desktop")),i||(i=s[0]);let c=B(t,i);if(!c)return C("No active config for breakpoint:",o),k(e,!1),!1;C("Active config:",c);let l=ue(r,c,t);if(!l||!l.tween)return C("Failed to create animation"),k(e,!1),!1;R.set(e,l);let m=l.tween.vars.onComplete;return l.tween.vars.onComplete=function(){C(`Preview animation completed for ${e}`),m&&m.apply(this,arguments),setTimeout(()=>{k(e,!1),C(`Preview lock released for ${e}`)},2e3)},C("Playing animation"),l.tween.restart(!0),!0}function pe(){C(`Cleaning up all previews (${R.size} active)`);for(let e of R.keys())D(e,!0)}window.scPreview=de;window.scPreviewCleanup=D;window.scPreviewCleanupAll=pe;C("Direct Preview API initialized");function ee(){W(document)}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",ee):ee();window.addEventListener("elementor/popup/show",e=>{W(e.target);let t=b();t&&t.refresh()});var re=()=>{let e=0,t=50,o=()=>{var i,c,l;if(!window.elementorFrontend||!window.elementorFrontend.hooks){e++,e<t?(e%10===0&&((i=window.ScrollCrafterConfig)!=null&&i.debug)&&console.log(`[ScrollCrafter] Still waiting for elementorFrontend hooks (attempt ${e})...`),setTimeout(o,100)):console.warn("[ScrollCrafter] Elementor hooks not found after 5s. Animations might not initialize.");return}(c=window.ScrollCrafterConfig)!=null&&c.debug&&console.log("[ScrollCrafter] Elementor hooks found. Registering...");let r,s=()=>{clearTimeout(r),r=setTimeout(()=>{var g;let m=b();m&&((g=window.ScrollCrafterConfig)!=null&&g.debug&&console.log("[ScrollCrafter] Debounced Refresh"),m.refresh())},200)};elementorFrontend.hooks.addAction("frontend/element_ready/global",m=>{var a;let g=m[0];if(g){if(elementorFrontend.isEditMode()){let u=g.getAttribute("data-id");u&&ge(u);let w=d=>{try{if(window.ScrollCrafterForcePreview===d||window.parent&&window.parent.ScrollCrafterForcePreview===d||window.top&&window.top.ScrollCrafterForcePreview===d||sessionStorage.getItem("sc_force_preview")===d)return!0}catch(S){}return!1},n=!!((a=window.ScrollCrafterConfig)!=null&&a.enableEditorAnimations),f=g.getAttribute("data-sc-preview")==="yes"||w(u);if(!n&&!f)return;f&&setTimeout(()=>{window.ScrollCrafterForcePreview===u&&(window.ScrollCrafterForcePreview=!1),window.parent&&window.parent.ScrollCrafterForcePreview===u&&(window.parent.ScrollCrafterForcePreview=!1),window.top&&window.top.ScrollCrafterForcePreview===u&&(window.top.ScrollCrafterForcePreview=!1),sessionStorage.removeItem("sc_force_preview")},100)}W(g,elementorFrontend.isEditMode()),elementorFrontend.isEditMode()&&s()}}),(l=window.ScrollCrafterConfig)!=null&&l.debug&&console.log("[ScrollCrafter] Elementor hooks registered successfully")};o()};re();window.addEventListener("elementor/frontend/init",re);function ge(e){var t;try{let o=b();if(!o)return;let r="sc-"+e,s=o.getById(r);s&&((t=window.ScrollCrafterConfig)!=null&&t.debug&&console.log(`[ScrollCrafter] Killing trigger: ${r}`),s.kill(!0))}catch(o){console.warn("[ScrollCrafter] Error killing trigger:",o)}}})();
