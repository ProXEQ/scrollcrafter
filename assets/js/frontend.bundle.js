(()=>{var M={},q=new WeakSet;function E(o,t){M[o]=t}function P(o=document,t=!1){if(!o)return;let n=[];o.hasAttribute&&o.hasAttribute("data-scrollcrafter-config")&&n.push(o),o.querySelectorAll&&o.querySelectorAll("[data-scrollcrafter-config]").forEach(r=>n.push(r)),n.forEach(r=>{var v,u;let m=q.has(r);if(!t&&m)return;if(typeof r.__sc_cleanup=="function"){try{r.__sc_cleanup()}catch(s){console.warn("[ScrollCrafter] Cleanup error:",s)}delete r.__sc_cleanup}let w=r.getAttribute("data-scrollcrafter-config");if(!w)return;let p;try{p=JSON.parse(w)}catch(s){(v=window.ScrollCrafterConfig)!=null&&v.debug&&console.warn("[ScrollCrafter] Invalid config JSON:",s,r);return}let h=p.widget;if(!(!h||typeof M[h]!="function"))try{(u=window.ScrollCrafterConfig)!=null&&u.debug&&console.log(`[ScrollCrafter] Initializing widget: "${h}"`,r);let s=M[h](r,p);typeof s=="function"&&(r.__sc_cleanup=s),q.add(r),r.dispatchEvent(new CustomEvent("scrollcrafter:init",{bubbles:!0,detail:{type:h,config:p}}))}catch(s){console.error(`[ScrollCrafter] Init error for "${h}":`,s)}})}function k(){if(typeof window=="undefined")return null;let{gsap:o}=window;if(!o)return console.error("[ScrollCrafter] GSAP core not found! Make sure gsap.min.js is loaded."),null;if(window.ScrollTrigger&&o.registerPlugin)try{o.registerPlugin(window.ScrollTrigger)}catch(t){}return o}function x(){return typeof window=="undefined"?null:window.ScrollTrigger?window.ScrollTrigger:(console.warn("[ScrollCrafter] ScrollTrigger not found! Animations may not work."),null)}var O=new Map;function B(o,t){if(typeof o!="string")return o;o==="calc_scroll_width_neg"&&(o="calc(sw * -1)"),o==="calc_scroll_width"&&(o="calc(sw)"),o==="calc_100vh"&&(o="calc(vh)");let n=o.match(/^calc\s*\((.*)\)$/i);if(n){let r=n[1].replace(/(\d)\s*(sw|cw|ch|vw|vh)\b/gi,"$1 * $2");return(m,w)=>{let p=w||t,h=window.innerWidth,v=window.innerHeight,u=p.clientWidth||0,s=p.clientHeight||0,T={sw:Math.max(0,p.scrollWidth-u),cw:u,ch:s,vw:h,vh:v,center:(h-u)/2,vcenter:(v-s)/2,end:h-u},d=r;["vcenter","center","sw","cw","ch","vw","vh","end"].forEach(l=>{d=d.replace(new RegExp(`\\b${l}\\b`,"gi"),T[l])});let e=O.get(d);if(!e){let l=d.replace(/[0-9\.\+\-\*\/\(\)\s]/g,"");if(l.length>0)return console.warn("[ScrollCrafter] Unsafe characters in result expression:",l),0;try{e=new Function("return "+d),O.set(d,e)}catch(i){return console.error("[ScrollCrafter] Compile error:",i,d),0}}try{return e()}catch(l){return console.error("[ScrollCrafter] Calc exec error:",l),0}}}return o}function b(o,t){if(!o||typeof o!="object")return o;let n={...o};return Object.keys(n).forEach(r=>{let m=n[r];if(m&&typeof m=="object"&&!Array.isArray(m)){n[r]=b(m,t);return}n[r]=B(m,t)}),n}E("scroll_animation",(o,t)=>{var d,a;let n=!!((d=window.ScrollCrafterConfig)!=null&&d.debug),r=`[ScrollCrafter][${t.id||"anim"}]`,m=(e,l)=>{var i,f,g;n&&(console.group(`${r} ${e}`),console.log("Method:",(i=l.animation)==null?void 0:i.method),console.log("Vars:",(f=l.animation)==null?void 0:f.vars),console.log("Vars2:",(g=l.animation)==null?void 0:g.vars2),console.log("Target:",l.target||t.target),console.groupEnd())};n&&console.log(`${r} RAW CONFIG`,t);let w;try{w=k(),x()}catch(e){n&&console.error(`${r} GSAP missing`,e);return}let p=(e,l)=>{var R,I;let i=e.target||t.target||{},f=[];if(i.type==="wrapper"?f=[l]:i.selector?f=l.querySelectorAll(i.selector):f=[l],!f.length)return n&&console.warn(`${r} No elements found for selector:`,i.selector),null;let g=e.animation||{},c=g.method||"from",F=f[0];if(g.split)if(n&&console.log(`${r} SplitText requested: ${g.split}, SplitText available: ${typeof window.SplitText}`),window.SplitText)try{f.forEach(A=>{A._splitText&&(n&&console.log(`${r} Reverting existing SplitText`),A._splitText.revert())});let y=new SplitText(f,{type:g.split});f.forEach(A=>{A._splitText=y}),y.chars&&y.chars.length?f=y.chars:y.words&&y.words.length?f=y.words:y.lines&&y.lines.length&&(f=y.lines),n&&console.log(`${r} SplitText created, elements count: ${f.length}`),f.length&&w.set(f,{display:"inline-block"})}catch(y){console.warn(`${r} SplitText error:`,y)}else console.warn(`${r} SplitText not available! Make sure GSAP SplitText is loaded.`);let $=b({...g.vars},F),C=g.vars2?b({...g.vars2},F):null;w.set(f,{transition:"none",translate:"none",rotate:"none",scale:"none"}),$.scrollTrigger&&($.scrollTrigger.trigger=l,t.id&&($.scrollTrigger.id="sc-"+t.id)),C&&C.scrollTrigger&&(C.scrollTrigger.trigger=l,t.id&&(C.scrollTrigger.id="sc-"+t.id)),n&&(console.log(`${r} CreateTween: method=${c}, elements=${f.length}`,f),console.log(`${r} Stagger Value:`,(I=(R=$.stagger)!=null?R:g.stagger)!=null?I:"none"),console.log(`${r} Vars:`,$),C&&console.log(`${r} Vars2 (To):`,C)),c==="from"?$.immediateRender===void 0&&($.immediateRender=!0):c==="fromTo"&&C&&C.immediateRender===void 0&&(C.immediateRender=!0);let _;return c==="fromTo"&&C?_=w.fromTo(f,$,C):typeof w[c]=="function"&&(_=w[c](f,$)),_&&(c==="from"||c==="fromTo")&&_.progress(1).progress(0),!_&&n&&console.warn(`${r} Unknown GSAP method:`,c),_},h=w.matchMedia(),u=[...((a=window.ScrollCrafterConfig)==null?void 0:a.breakpoints)||[]].sort((e,l)=>e.value-l.value),s=0,S=[];u.forEach(e=>{let l=s+1,i=e.value;s=i;let f=l===1?`(max-width: ${i}px)`:`(min-width: ${l}px) and (max-width: ${i}px)`;S.push({slug:e.key,query:f})}),S.push({slug:"_default_desktop",query:`(min-width: ${s+1}px)`});let T=[];return S.forEach(e=>{h.add(e.query,()=>{let l=t.animation;if(e.slug!=="_default_desktop"&&t.media&&t.media[e.slug]?(l=t.media[e.slug],m(`Active: ${e.slug} (Override)`,{...t,animation:l})):m(`Active: ${e.slug} (Global)`,t),l){let i=p({...t,animation:l},o);if(i&&T.push(i),(window.ScrollCrafterForcePreview===t.id||window.parent&&window.parent.ScrollCrafterForcePreview===t.id||o.getAttribute("data-sc-preview")==="yes")&&i)if(n&&console.log(`${r} Manual preview detected, force playing animation`),i.scrollTrigger){let g=i.scrollTrigger;g.pin||g.vars&&g.vars.scrub?(n&&console.log(`${r} Pin/Scrub detected, animating progress`),w.fromTo(g,{progress:0},{progress:1,duration:1.5,ease:"power1.inOut"})):(g.disable(),i.restart(!0))}else i.restart(!0)}})}),()=>{n&&console.log(`${r} Cleaning up...`),h.revert(),T.forEach(e=>{e.scrollTrigger&&e.scrollTrigger.kill(!0),e.kill()})}});function G(o,t,n,r,m,w){let p=o,h=t.target||n.target||{},v=[p];if(h.selector&&h.type!=="wrapper"){let d=p.querySelectorAll(h.selector);d.length&&(v=Array.from(d))}let u={...t.timelineVars||{}};u.defaults&&(u.defaults=b(u.defaults,p)),u.scrollTrigger||(u.scrollTrigger={});let s=u.scrollTrigger;s.trigger||(s.trigger=p),s.pin===!0&&(s.pin=p),s.pin&&w.set(s.pin,{transition:"none"}),typeof s.invalidateOnRefresh=="undefined"&&(s.invalidateOnRefresh=!0),typeof s.anticipatePin=="undefined"&&(s.anticipatePin=.5),n.id&&!s.id&&(s.id=`sc-${n.id}`);let S=w.timeline(u);return(t.steps||[]).forEach((d,a)=>{let e=d.method||"to",l=d.position;if(e==="addLabel"){let c=d.vars;typeof c=="string"&&S.addLabel(c,l);return}if(e==="call")return;let i=v;if(d.selector){let c=p.querySelectorAll(d.selector);if(!c.length){r&&console.warn(`${m} Step ${a+1}: selector "${d.selector}" not found`);return}i=Array.from(c)}let f=b(d.vars||{},p),g=d.vars2?b(d.vars2,p):null;if(w.set(i,{transition:"none",translate:"none",rotate:"none",scale:"none"}),d.split&&window.SplitText)try{let c=new SplitText(i,{type:d.split});c.chars&&c.chars.length?i=c.chars:c.words&&c.words.length?i=c.words:c.lines&&c.lines.length&&(i=c.lines),i.length&&w.set(i,{display:"inline-block"})}catch(c){r&&console.warn(`${m} SplitText error:`,c)}r&&console.log(`${m} Step ${a+1}: method=${e}, targets=${i.length}`,i),e==="from"?f.immediateRender===void 0&&(f.immediateRender=!0):e==="fromTo"&&g&&g.immediateRender===void 0&&(g.immediateRender=!0);try{let c;e==="fromTo"&&g?c=S.fromTo(i,f,g,l):typeof S[e]=="function"&&(c=S[e](i,f,l))}catch(c){r&&console.error(`${m} Error step ${a+1}`,c)}}),S}E("scroll_timeline",(o,t)=>{var T,d;let n=!!((T=window.ScrollCrafterConfig)!=null&&T.debug),r=`[ScrollCrafter][timeline:${t.id||"tl"}]`,m=(a,e)=>{n&&(console.group(`${r} ${a}`),console.log("Details:",e),console.groupEnd())},w;try{w=k(),x()}catch(a){n&&console.error(`${r} GSAP missing`,a);return}let p=w.matchMedia(),v=[...((d=window.ScrollCrafterConfig)==null?void 0:d.breakpoints)||[]].sort((a,e)=>a.value-e.value),u=0,s=[];v.forEach(a=>{let e=u+1,l=a.value;u=l;let i=e===1?`(max-width: ${l}px)`:`(min-width: ${e}px) and (max-width: ${l}px)`;s.push({slug:a.key,query:i})}),s.push({slug:"_default_desktop",query:`(min-width: ${u+1}px)`});let S=[];return s.forEach(a=>{p.add(a.query,()=>{let e=t,l=!1;if(a.slug!=="_default_desktop"&&t.media&&t.media[a.slug]&&t.media[a.slug]&&(e=t.media[a.slug],l=!0),e&&e.steps&&e.steps.length>0){let i;if(l?(m(`Active: ${a.slug} (Override)`,e),i=G(o,e,t,n,r+`[${a.slug}]`,w)):(m(`Active: ${a.slug} (Global)`,e),i=G(o,e,t,n,r,w)),i&&S.push(i),(window.ScrollCrafterForcePreview===t.id||window.parent&&window.parent.ScrollCrafterForcePreview===t.id||o.getAttribute("data-sc-preview")==="yes")&&i)if(n&&console.log(`${r} Manual preview detected, force playing timeline`),i.scrollTrigger){let g=i.scrollTrigger;g.pin||g.vars&&g.vars.scrub?(n&&console.log(`${r} Pin/Scrub detected, animating progress`),w.fromTo(g,{progress:0},{progress:1,duration:1.5,ease:"power1.inOut"})):(g.disable(),i.restart(!0))}else i.restart(!0)}})}),()=>{n&&console.log(`${r} Cleaning up...`),p.revert(),S.forEach(a=>{a.scrollTrigger&&a.scrollTrigger.kill(!0),a.kill()})}});function W(){P(document)}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",W):W();window.addEventListener("elementor/popup/show",o=>{P(o.target);let t=x();t&&t.refresh()});var V=()=>{let o=0,t=50,n=()=>{var w,p,h;if(!window.elementorFrontend||!window.elementorFrontend.hooks){o++,o<t?(o%10===0&&((w=window.ScrollCrafterConfig)!=null&&w.debug)&&console.log(`[ScrollCrafter] Still waiting for elementorFrontend hooks (attempt ${o})...`),setTimeout(n,100)):console.warn("[ScrollCrafter] Elementor hooks not found after 5s. Animations might not initialize.");return}(p=window.ScrollCrafterConfig)!=null&&p.debug&&console.log("[ScrollCrafter] Elementor hooks found. Registering...");let r,m=()=>{clearTimeout(r),r=setTimeout(()=>{var u;let v=x();v&&((u=window.ScrollCrafterConfig)!=null&&u.debug&&console.log("[ScrollCrafter] Debounced Refresh"),v.refresh())},200)};elementorFrontend.hooks.addAction("frontend/element_ready/global",v=>{var s;let u=v[0];if(u){if(elementorFrontend.isEditMode()){let S=u.getAttribute("data-id");S&&L(S);let T=e=>{try{if(window.ScrollCrafterForcePreview===e||window.parent&&window.parent.ScrollCrafterForcePreview===e||window.top&&window.top.ScrollCrafterForcePreview===e||sessionStorage.getItem("sc_force_preview")===e)return!0}catch(l){}return!1},d=!!((s=window.ScrollCrafterConfig)!=null&&s.enableEditorAnimations),a=u.getAttribute("data-sc-preview")==="yes"||T(S);if(!d&&!a)return;a&&setTimeout(()=>{window.ScrollCrafterForcePreview===S&&(window.ScrollCrafterForcePreview=!1),window.parent&&window.parent.ScrollCrafterForcePreview===S&&(window.parent.ScrollCrafterForcePreview=!1),window.top&&window.top.ScrollCrafterForcePreview===S&&(window.top.ScrollCrafterForcePreview=!1),sessionStorage.removeItem("sc_force_preview")},100)}P(u,elementorFrontend.isEditMode()),elementorFrontend.isEditMode()&&m()}}),(h=window.ScrollCrafterConfig)!=null&&h.debug&&console.log("[ScrollCrafter] Elementor hooks registered successfully")};n()};V();window.addEventListener("elementor/frontend/init",V);function L(o){var t;try{let n=x();if(!n)return;let r="sc-"+o,m=n.getById(r);m&&((t=window.ScrollCrafterConfig)!=null&&t.debug&&console.log(`[ScrollCrafter] Killing trigger: ${r}`),m.kill(!0))}catch(n){console.warn("[ScrollCrafter] Error killing trigger:",n)}}})();
