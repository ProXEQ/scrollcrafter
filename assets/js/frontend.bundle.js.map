{
  "version": 3,
  "sources": ["../src/frontend/core/registry.js", "../src/frontend/core/gsap-loader.js", "../src/frontend/widgets/scroll-animation.js", "../src/frontend/widgets/scroll-timeline.js", "../src/frontend/index.js"],
  "sourcesContent": ["const registry = {};\n\nconst initializedNodes = new WeakSet();\n\nexport function registerWidget(type, initFn) {\n  registry[type] = initFn;\n}\n\nexport function initWidgetsInScope(root = document, force = false) {\n  if (!root) {\n    return;\n  }\n\n  // Find all nodes including root itself\n  const nodes = [];\n  if (root.hasAttribute && root.hasAttribute('data-scrollcrafter-config')) {\n    nodes.push(root);\n  }\n  if (root.querySelectorAll) {\n    root.querySelectorAll('[data-scrollcrafter-config]').forEach(n => nodes.push(n));\n  }\n\n  nodes.forEach((node) => {\n    const isAlreadyInit = initializedNodes.has(node);\n    if (!force && isAlreadyInit) {\n      return;\n    }\n\n    // --- Cleanup Stage ---\n    // If we have an existing cleanup function on the node, call it.\n    if (typeof node.__sc_cleanup === 'function') {\n      try {\n        node.__sc_cleanup();\n      } catch (e) {\n        console.warn('[ScrollCrafter] Cleanup error:', e);\n      }\n      delete node.__sc_cleanup;\n    }\n\n    const raw = node.getAttribute('data-scrollcrafter-config');\n    if (!raw) return;\n\n    let config;\n    try {\n      config = JSON.parse(raw);\n    } catch (e) {\n      if (window.ScrollCrafterConfig?.debug) {\n        console.warn('[ScrollCrafter] Invalid config JSON:', e, node);\n      }\n      return;\n    }\n\n    const type = config.widget;\n    if (!type || typeof registry[type] !== 'function') {\n      return;\n    }\n\n    try {\n      if (window.ScrollCrafterConfig?.debug) {\n        console.log(`[ScrollCrafter] Initializing widget: \"${type}\"`, node);\n      }\n\n      // Execute registration - it MUST return a cleanup function (or attach it to node)\n      const cleanup = registry[type](node, config);\n      if (typeof cleanup === 'function') {\n        node.__sc_cleanup = cleanup;\n      }\n\n      initializedNodes.add(node);\n\n      node.dispatchEvent(\n        new CustomEvent('scrollcrafter:init', {\n          bubbles: true,\n          detail: { type, config },\n        }),\n      );\n    } catch (e) {\n      console.error(`[ScrollCrafter] Init error for \"${type}\":`, e);\n    }\n  });\n}\n", "export function getGsap() {\n  if (typeof window === 'undefined') return null;\n\n  const { gsap } = window;\n  \n  if (!gsap) {\n    console.error('[ScrollCrafter] GSAP core not found! Make sure gsap.min.js is loaded.');\n    return null;\n  }\n\n  if (window.ScrollTrigger && gsap.registerPlugin) {\n    try {\n        gsap.registerPlugin(window.ScrollTrigger);\n    } catch (e) {\n    }\n  }\n\n  return gsap;\n}\n\nexport function getScrollTrigger() {\n  if (typeof window === 'undefined') return null;\n\n  if (!window.ScrollTrigger) {\n    console.warn('[ScrollCrafter] ScrollTrigger not found! Animations may not work.');\n    return null;\n  }\n\n  return window.ScrollTrigger;\n}\n", "import { registerWidget } from '../core/registry';\nimport { getGsap, getScrollTrigger } from '../core/gsap-loader';\n\n/**\n * Helper: Bezpieczny parser wyra\u017Ce\u0144 matematycznych (Rozszerzony)\n * Obs\u0142uguje: sw (scrollWidth), cw (clientWidth), vw (viewportWidth), center, end\n */\nfunction parseSmartValue(val, contextNode) {\n  if (typeof val !== 'string') return val;\n\n  if (val === 'calc_scroll_width_neg') val = 'calc(sw * -1)';\n  if (val === 'calc_scroll_width') val = 'calc(sw)';\n  if (val === 'calc_100vh') val = 'calc(vh)';\n\n  if (val.match(/^calc\\s*\\((.*)\\)$/i)) {\n    let expression = val.match(/^calc\\s*\\((.*)\\)$/i)[1];\n\n    // Support unit-like syntax: 100sw -> 100 * sw\n    // Only for dimensions (sw, cw, ch, vw, vh), not for keywords like center/end\n    expression = expression.replace(/(\\d)\\s*(sw|cw|ch|vw|vh)\\b/gi, '$1 * $2');\n\n    return (index, target) => {\n      const el = target || contextNode;\n\n      const vw = window.innerWidth;\n      const vh = window.innerHeight;\n      const cw = el.clientWidth || 0;\n      const ch = el.clientHeight || 0;\n\n      const totalScrollW = el.scrollWidth - cw;\n      const sw = totalScrollW > 0 ? totalScrollW : 0;\n\n      const center = (vw - cw) / 2;\n      const vcenter = (vh - ch) / 2;\n      const end = vw - cw;\n\n      const varsMap = {\n        sw: sw, cw: cw, ch: ch, vw: vw, vh: vh,\n        center: center, vcenter: vcenter, end: end\n      };\n\n      let cleanExpr = expression;\n      Object.keys(varsMap).forEach(key => {\n        const regex = new RegExp(`\\\\b${key}\\\\b`, 'gi');\n        cleanExpr = cleanExpr.replace(regex, '');\n      });\n\n      if (!/^[0-9\\.\\+\\-\\*\\/\\(\\)\\s]*$/.test(cleanExpr)) {\n        console.warn('[ScrollCrafter] Unsafe calc expression:', expression);\n        return 0;\n      }\n\n      let finalExpr = expression;\n      const sortedKeys = Object.keys(varsMap).sort((a, b) => b.length - a.length);\n\n      sortedKeys.forEach(key => {\n        const regex = new RegExp(`\\\\b${key}\\\\b`, 'gi');\n        finalExpr = finalExpr.replace(regex, varsMap[key]);\n      });\n\n      try {\n        return new Function('return ' + finalExpr)();\n      } catch (e) {\n        console.error('[ScrollCrafter] Calc error:', e);\n        return 0;\n      }\n    };\n  }\n  return val;\n}\n\n/**\n * Helper: Rekurencyjne parsowanie obiektu vars\n */\nfunction parseMacros(vars, contextNode) {\n  if (!vars || typeof vars !== 'object') return vars;\n  const out = { ...vars };\n  Object.keys(out).forEach((key) => {\n    const val = out[key];\n    if (val && typeof val === 'object' && !Array.isArray(val)) {\n      out[key] = parseMacros(val, contextNode);\n      return;\n    }\n    out[key] = parseSmartValue(val, contextNode);\n  });\n  return out;\n}\n\n/**\n * Helper: Buduje Media Query\n */\nfunction buildMediaQuery(targetSlug, isStrict, sortedBreakpoints) {\n  if (!sortedBreakpoints || !Array.isArray(sortedBreakpoints)) return null;\n\n  const currentIndex = sortedBreakpoints.findIndex(bp => bp.key === targetSlug);\n  if (currentIndex === -1) return null;\n\n  const currentBp = sortedBreakpoints[currentIndex];\n  const maxQuery = `(max-width: ${currentBp.value}px)`;\n\n  if (!isStrict) {\n    return maxQuery;\n  }\n\n  let minQuery = '';\n  if (currentIndex > 0) {\n    const prevBp = sortedBreakpoints[currentIndex - 1];\n    const minVal = prevBp.value + 1;\n    minQuery = `(min-width: ${minVal}px) and `;\n  } else {\n    return maxQuery;\n  }\n  return `${minQuery}${maxQuery}`;\n}\n\nregisterWidget('scroll_animation', (node, config) => {\n  const debug = !!window.ScrollCrafterConfig?.debug;\n  const logPrefix = `[ScrollCrafter][${config.id || 'anim'}]`;\n\n  const logConfig = (label, cfg) => {\n    if (!debug) return;\n    console.group(`${logPrefix} ${label}`);\n    console.log('Method:', cfg.animation?.method);\n    console.log('Vars:', cfg.animation?.vars);\n    console.log('Vars2:', cfg.animation?.vars2);\n    console.log('Target:', cfg.target || config.target);\n    console.groupEnd();\n  };\n\n  if (debug) {\n    console.log(`${logPrefix} RAW CONFIG`, config);\n  }\n\n  let gsap;\n  try {\n    gsap = getGsap();\n    getScrollTrigger();\n  } catch (e) {\n    if (debug) console.error(`${logPrefix} GSAP missing`, e);\n    return;\n  }\n\n  const createTween = (cfg, contextNode) => {\n    const targetConfig = cfg.target || config.target || {};\n    let elements = [];\n\n    if (targetConfig.type === 'wrapper') {\n      elements = [contextNode];\n    } else if (targetConfig.selector) {\n      elements = contextNode.querySelectorAll(targetConfig.selector);\n    } else {\n      elements = [contextNode];\n    }\n\n    if (!elements.length) {\n      if (debug) console.warn(`${logPrefix} No elements found for selector:`, targetConfig.selector);\n      return null;\n    }\n\n    const animConfig = cfg.animation || {};\n    const method = animConfig.method || 'from';\n\n    const calcContext = elements[0];\n\n    // --- SplitText Support ---\n    if (animConfig.split && window.SplitText) {\n      try {\n        const split = new SplitText(elements, { type: animConfig.split });\n        // Priority: chars > words > lines\n        if (split.chars && split.chars.length) elements = split.chars;\n        else if (split.words && split.words.length) elements = split.words;\n        else if (split.lines && split.lines.length) elements = split.lines;\n\n        // Fix: Elements must be inline-block for rotation to work\n        if (elements.length) {\n          gsap.set(elements, { display: 'inline-block' });\n        }\n      } catch (e) {\n        console.warn(`${logPrefix} SplitText error:`, e);\n      }\n    }\n\n    const vars = parseMacros({ ...animConfig.vars }, calcContext);\n    const vars2 = animConfig.vars2 ? parseMacros({ ...animConfig.vars2 }, calcContext) : null;\n\n    // Fix: Disable CSS transitions to prevent conflict with GSAP\n    gsap.set(elements, {\n      transition: \"none\",\n      // Force individual transforms to 'none' if they exist to prevent conflicts with 'transform' property\n      translate: \"none\",\n      rotate: \"none\",\n      scale: \"none\"\n    });\n\n    if (vars.scrollTrigger) {\n      vars.scrollTrigger.trigger = contextNode;\n      if (config.id) vars.scrollTrigger.id = 'sc-' + config.id;\n    }\n    if (vars2 && vars2.scrollTrigger) {\n      vars2.scrollTrigger.trigger = contextNode;\n      if (config.id) vars2.scrollTrigger.id = 'sc-' + config.id;\n    }\n\n    if (debug) {\n      console.log(`${logPrefix} CreateTween: method=${method}, elements=${elements.length}`, elements);\n      console.log(`${logPrefix} Stagger Value:`, vars.stagger ?? animConfig.stagger ?? 'none');\n      console.log(`${logPrefix} Vars:`, vars);\n      if (vars2) console.log(`${logPrefix} Vars2 (To):`, vars2);\n    }\n\n    if (method === 'fromTo' && vars2) {\n      return gsap.fromTo(elements, vars, vars2);\n    } else if (typeof gsap[method] === 'function') {\n      return gsap[method](elements, vars);\n    }\n\n    if (debug) console.warn(`${logPrefix} Unknown GSAP method:`, method);\n    return null;\n  };\n\n  const mm = gsap.matchMedia();\n  const sysBreakpoints = window.ScrollCrafterConfig?.breakpoints || [];\n\n  // Ensure sorted by value\n  const sortedBps = [...sysBreakpoints].sort((a, b) => a.value - b.value);\n\n  let prevMax = 0;\n  const rangeConfig = [];\n\n  // Build ranges for defined breakpoints\n  sortedBps.forEach(bp => {\n    const min = prevMax + 1;\n    const max = bp.value;\n    prevMax = max;\n\n    const query = min === 1\n      ? `(max-width: ${max}px)`\n      : `(min-width: ${min}px) and (max-width: ${max}px)`;\n\n    rangeConfig.push({ slug: bp.key, query });\n  });\n\n  // Add Desktop/Default (above last breakpoint)\n  rangeConfig.push({\n    slug: '_default_desktop',\n    query: `(min-width: ${prevMax + 1}px)`\n  });\n\n  // Register Contexts\n  const tweens = [];\n\n  rangeConfig.forEach(range => {\n    mm.add(range.query, () => {\n      let activeConfig = config.animation; // Default to global/base\n\n      // Check for override\n      if (range.slug !== '_default_desktop' && config.media && config.media[range.slug]) {\n        activeConfig = config.media[range.slug];\n        logConfig(`Active: ${range.slug} (Override)`, { ...config, animation: activeConfig });\n      } else {\n        logConfig(`Active: ${range.slug} (Global)`, config);\n      }\n\n      if (activeConfig) {\n        const tween = createTween({ ...config, animation: activeConfig }, node);\n        if (tween) tweens.push(tween);\n\n        // Force play if this is a manual preview\n        const isManualPreview = (window.ScrollCrafterForcePreview === config.id) ||\n          (window.parent && window.parent.ScrollCrafterForcePreview === config.id) ||\n          (node.getAttribute('data-sc-preview') === 'yes');\n\n        if (isManualPreview && tween) {\n          if (debug) console.log(`${logPrefix} Manual preview detected, force playing animation`);\n\n          if (tween.scrollTrigger) {\n            const st = tween.scrollTrigger;\n            // For Pin/Scrub, animate progress to show effect without breaking structure\n            if (st.pin || (st.vars && st.vars.scrub)) {\n              if (debug) console.log(`${logPrefix} Pin/Scrub detected, animating progress`);\n              gsap.fromTo(st, { progress: 0 }, {\n                progress: 1,\n                duration: 1.5,\n                ease: \"power1.inOut\"\n              });\n            } else {\n              st.disable();\n              tween.play(0);\n            }\n          } else {\n            tween.play(0);\n          }\n        }\n      }\n    });\n  });\n\n  return () => {\n    if (debug) console.log(`${logPrefix} Cleaning up...`);\n    mm.revert(); // Revert matchMedia\n    tweens.forEach(t => {\n      if (t.scrollTrigger) {\n        // Very important for Pin: kill(true) removes the spacer and reverts DOM\n        t.scrollTrigger.kill(true);\n      }\n      t.kill();\n    });\n  };\n});\n", "import { registerWidget } from '../core/registry';\nimport { getGsap, getScrollTrigger } from '../core/gsap-loader';\n\n/**\n * Helper: Buduje Media Query z obs\u0142ug\u0105 Strict\n * @param {string} targetSlug - np. 'tablet'\n * @param {boolean} isStrict - czy w\u0142\u0105czono tryb strict\n * @param {Array} sortedBreakpoints - tablica z Configu [{key:'mobile', value:767}, ...]\n */\n/**\n * Helper: Bezpieczny parser wyra\u017Ce\u0144 matematycznych (Rozszerzony)\n */\nfunction parseSmartValue(val, contextNode) {\n  if (typeof val !== 'string') return val;\n\n  if (val === 'calc_scroll_width_neg') val = 'calc(sw * -1)';\n  if (val === 'calc_scroll_width') val = 'calc(sw)';\n  if (val === 'calc_100vh') val = 'calc(vh)';\n\n  if (val.match(/^calc\\s*\\((.*)\\)$/i)) {\n    let expression = val.match(/^calc\\s*\\((.*)\\)$/i)[1];\n\n    // Support unit-like syntax: 100sw -> 100 * sw\n    expression = expression.replace(/(\\d)\\s*(sw|cw|ch|vw|vh)\\b/gi, '$1 * $2');\n\n    return (index, target) => {\n      const el = target || contextNode;\n\n      const vw = window.innerWidth;\n      const vh = window.innerHeight;\n      const cw = el.clientWidth || 0;\n      const ch = el.clientHeight || 0;\n\n      const totalScrollW = el.scrollWidth - cw;\n      const sw = totalScrollW > 0 ? totalScrollW : 0;\n\n      const center = (vw - cw) / 2;\n      const end = vw - cw;\n      const vcenter = (vh - ch) / 2;\n\n      const varsMap = { sw, cw, ch, vw, vh, center, vcenter, end };\n\n      let cleanExpr = expression;\n      Object.keys(varsMap).forEach(key => {\n        const regex = new RegExp(`\\\\b${key}\\\\b`, 'gi');\n        cleanExpr = cleanExpr.replace(regex, '');\n      });\n\n      if (!/^[0-9\\.\\+\\-\\*\\/\\(\\)\\s]*$/.test(cleanExpr)) {\n        console.warn('[ScrollCrafter] Unsafe characters in calc expression:', expression);\n        return 0;\n      }\n\n      let finalExpr = expression;\n      const sortedKeys = Object.keys(varsMap).sort((a, b) => b.length - a.length);\n\n      sortedKeys.forEach(key => {\n        const regex = new RegExp(`\\\\b${key}\\\\b`, 'gi');\n        finalExpr = finalExpr.replace(regex, varsMap[key]);\n      });\n\n      try {\n        return new Function('return ' + finalExpr)();\n      } catch (e) {\n        console.error('[ScrollCrafter] Calc error:', e);\n        return 0;\n      }\n    };\n  }\n\n  return val;\n}\n\nfunction parseMacros(vars, contextNode) {\n  if (!vars || typeof vars !== 'object') return vars;\n  const out = { ...vars };\n  Object.keys(out).forEach((key) => {\n    const val = out[key];\n    if (val && typeof val === 'object' && !Array.isArray(val)) {\n      out[key] = parseMacros(val, contextNode);\n      return;\n    }\n    out[key] = parseSmartValue(val, contextNode);\n  });\n  return out;\n}\n\nfunction getPinElement(node) {\n  return node;\n}\n\nfunction createTimeline(node, configData, globalConfig, debug, logPrefix, gsap) {\n  const pinElem = getPinElement(node);\n\n  const targetCfg = configData.target || globalConfig.target || {};\n  let mainTargets = [pinElem];\n\n  if (targetCfg.selector && targetCfg.type !== 'wrapper') {\n    const found = pinElem.querySelectorAll(targetCfg.selector);\n    if (found.length) mainTargets = Array.from(found);\n  }\n\n  const timelineVars = { ...(configData.timelineVars || {}) };\n  if (timelineVars.defaults) {\n    timelineVars.defaults = parseMacros(timelineVars.defaults, pinElem);\n  }\n\n  if (!timelineVars.scrollTrigger) timelineVars.scrollTrigger = {};\n  const st = timelineVars.scrollTrigger;\n\n  if (!st.trigger) st.trigger = pinElem;\n  if (st.pin === true) st.pin = pinElem;\n\n  // Fix Elementor Jump: Disable CSS transitions on pinned element to prevent conflicts\n  if (st.pin) {\n    gsap.set(st.pin, { transition: \"none\" });\n  }\n  if (typeof st.invalidateOnRefresh === 'undefined') st.invalidateOnRefresh = true;\n  if (typeof st.anticipatePin === 'undefined') st.anticipatePin = 0.5;\n  if (globalConfig.id && !st.id) st.id = `sc-${globalConfig.id}`;\n\n  const tl = gsap.timeline(timelineVars);\n\n  const steps = configData.steps || [];\n  steps.forEach((step, index) => {\n    const method = step.method || 'to';\n    const position = step.position;\n\n    if (method === 'addLabel') {\n      const label = step.vars;\n      if (typeof label === 'string') tl.addLabel(label, position);\n      return;\n    }\n    if (method === 'call') return;\n\n    let targets = mainTargets;\n    if (step.selector) {\n      const found = pinElem.querySelectorAll(step.selector);\n      if (!found.length) {\n        if (debug) console.warn(`${logPrefix} Step ${index + 1}: selector \"${step.selector}\" not found`);\n        return;\n      }\n      targets = Array.from(found);\n    }\n\n    const vars = parseMacros(step.vars || {}, pinElem);\n    const vars2 = step.vars2 ? parseMacros(step.vars2, pinElem) : null;\n\n    // --- SplitText Support (Timeline) ---\n    if (step.split && window.SplitText) {\n      try {\n        const split = new SplitText(targets, { type: step.split });\n        if (split.chars && split.chars.length) targets = split.chars;\n        else if (split.words && split.words.length) targets = split.words;\n        else if (split.lines && split.lines.length) targets = split.lines;\n\n        if (targets.length) {\n          gsap.set(targets, { display: 'inline-block' });\n        }\n      } catch (e) {\n        if (debug) console.warn(`${logPrefix} SplitText error:`, e);\n      }\n    }\n\n    if (debug) {\n      console.log(`${logPrefix} Step ${index + 1}: method=${method}, targets=${targets.length}`, targets);\n    }\n\n    try {\n      if (method === 'fromTo' && vars2) tl.fromTo(targets, vars, vars2, position);\n      else if (typeof tl[method] === 'function') tl[method](targets, vars, position);\n    } catch (e) {\n      if (debug) console.error(`${logPrefix} Error step ${index + 1}`, e);\n    }\n  });\n\n  return tl;\n}\n\n\nregisterWidget('scroll_timeline', (node, config) => {\n  const debug = !!window.ScrollCrafterConfig?.debug;\n  const logPrefix = `[ScrollCrafter][timeline:${config.id || 'tl'}]`;\n\n  const logConfig = (label, cfg) => {\n    if (!debug) return;\n    console.group(`${logPrefix} ${label}`);\n    console.log('Details:', cfg);\n    console.groupEnd();\n  };\n\n  let gsap;\n  try {\n    gsap = getGsap();\n    getScrollTrigger();\n  } catch (e) {\n    if (debug) console.error(`${logPrefix} GSAP missing`, e);\n    return;\n  }\n\n  const mm = gsap.matchMedia();\n  const sysBreakpoints = window.ScrollCrafterConfig?.breakpoints || [];\n\n  // Ensure sorted by value\n  const sortedBps = [...sysBreakpoints].sort((a, b) => a.value - b.value);\n\n  let prevMax = 0;\n  const rangeConfig = [];\n\n  // Build ranges for defined breakpoints\n  sortedBps.forEach(bp => {\n    const min = prevMax + 1;\n    const max = bp.value;\n    prevMax = max;\n\n    const query = min === 1\n      ? `(max-width: ${max}px)`\n      : `(min-width: ${min}px) and (max-width: ${max}px)`;\n\n    rangeConfig.push({ slug: bp.key, query });\n  });\n\n  // Add Desktop/Default (above last breakpoint)\n  rangeConfig.push({\n    slug: '_default_desktop',\n    query: `(min-width: ${prevMax + 1}px)`\n  });\n\n  // Register Contexts\n  const timelines = [];\n\n  rangeConfig.forEach(range => {\n    mm.add(range.query, () => {\n      let activeConfig = config; // Default to global config struct (which has steps)\n      // For timeline, config IS the container of steps.\n      // Media overrides usually provide different 'steps' or 'timelineVars'.\n\n      let isOverride = false;\n      if (range.slug !== '_default_desktop' && config.media && config.media[range.slug]) {\n        if (config.media[range.slug]) {\n          activeConfig = config.media[range.slug];\n          isOverride = true;\n        }\n      }\n\n      // Validation: Ensure activeConfig has steps\n      if (activeConfig && activeConfig.steps && activeConfig.steps.length > 0) {\n        let tl;\n        if (isOverride) {\n          logConfig(`Active: ${range.slug} (Override)`, activeConfig);\n          tl = createTimeline(node, activeConfig, config, debug, logPrefix + `[${range.slug}]`, gsap);\n        } else {\n          logConfig(`Active: ${range.slug} (Global)`, activeConfig);\n          tl = createTimeline(node, activeConfig, config, debug, logPrefix, gsap);\n        }\n\n        if (tl) timelines.push(tl);\n\n        // --- Preview Logic ---\n        const isManualPreview = (window.ScrollCrafterForcePreview === config.id) ||\n          (window.parent && window.parent.ScrollCrafterForcePreview === config.id) ||\n          (node.getAttribute('data-sc-preview') === 'yes');\n\n        if (isManualPreview && tl) {\n          if (debug) console.log(`${logPrefix} Manual preview detected, force playing timeline`);\n          if (tl.scrollTrigger) {\n            const st = tl.scrollTrigger;\n            if (st.pin || (st.vars && st.vars.scrub)) {\n              if (debug) console.log(`${logPrefix} Pin/Scrub detected, animating progress`);\n              gsap.fromTo(st, { progress: 0 }, {\n                progress: 1,\n                duration: 1.5,\n                ease: \"power1.inOut\"\n              });\n            } else {\n              st.disable();\n              tl.play(0);\n            }\n          } else {\n            tl.play(0);\n          }\n        }\n      }\n    });\n  });\n\n  return () => {\n    if (debug) console.log(`${logPrefix} Cleaning up...`);\n    mm.revert();\n    timelines.forEach(t => {\n      if (t.scrollTrigger) {\n        t.scrollTrigger.kill(true); // Reverts pin-spacer etc.\n      }\n      t.kill();\n    });\n  };\n});\n", "import { initWidgetsInScope } from './core/registry';\nimport { getScrollTrigger } from './core/gsap-loader';\nimport './widgets/scroll-animation';\nimport './widgets/scroll-timeline';\n\n/**\n * G\u0142\u00F3wna funkcja inicjalizuj\u0105ca.\n */\nfunction init() {\n  initWidgetsInScope(document);\n}\n\nif (document.readyState === 'loading') {\n  document.addEventListener('DOMContentLoaded', init);\n} else {\n  init();\n}\n\nwindow.addEventListener('elementor/popup/show', (event) => {\n  initWidgetsInScope(event.target);\n\n  const ScrollTrigger = getScrollTrigger();\n  if (ScrollTrigger) ScrollTrigger.refresh();\n});\n\nconst registerHooks = () => {\n  let attempts = 0;\n  const maxAttempts = 50; // 5 seconds\n\n  const tryRegister = () => {\n    if (!window.elementorFrontend || !window.elementorFrontend.hooks) {\n      attempts++;\n      if (attempts < maxAttempts) {\n        if (attempts % 10 === 0 && window.ScrollCrafterConfig?.debug) {\n          console.log(`[ScrollCrafter] Still waiting for elementorFrontend hooks (attempt ${attempts})...`);\n        }\n        setTimeout(tryRegister, 100);\n      } else {\n        console.warn('[ScrollCrafter] Elementor hooks not found after 5s. Animations might not initialize.');\n      }\n      return;\n    }\n\n    if (window.ScrollCrafterConfig?.debug) {\n      console.log('[ScrollCrafter] Elementor hooks found. Registering...');\n    }\n\n    elementorFrontend.hooks.addAction('frontend/element_ready/global', ($scope) => {\n      const node = $scope[0];\n      if (!node) return;\n\n      if (elementorFrontend.isEditMode()) {\n        const widgetId = node.getAttribute('data-id');\n        if (widgetId) {\n          killTriggerByWidgetId(widgetId);\n        }\n\n        // Check for force preview in multiple locations for cross-frame reliability\n        const getForcePreviewFlag = (id) => {\n          try {\n            // Check local\n            if (window.ScrollCrafterForcePreview === id) return true;\n            // Check parent (editor window)\n            if (window.parent && window.parent.ScrollCrafterForcePreview === id) return true;\n            // Check top (main editor window)\n            if (window.top && window.top.ScrollCrafterForcePreview === id) return true;\n            // Check sessionStorage (if origins match)\n            if (sessionStorage.getItem('sc_force_preview') === id) return true;\n          } catch (e) { }\n          return false;\n        };\n\n        // Check global config for live animations\n        const allowLive = !!(window.ScrollCrafterConfig?.enableEditorAnimations);\n        const isManualPreview = node.getAttribute('data-sc-preview') === 'yes' || getForcePreviewFlag(widgetId);\n\n        if (window.ScrollCrafterConfig?.debug || isManualPreview) {\n          console.log('[ScrollCrafter] Check init:', {\n            widgetId,\n            allowLive,\n            isManualPreview,\n            dataAttr: node.getAttribute('data-sc-preview'),\n            parentFlag: window.parent?.ScrollCrafterForcePreview,\n            topFlag: window.top?.ScrollCrafterForcePreview,\n            sessionFlag: sessionStorage.getItem('sc_force_preview')\n          });\n        }\n\n        if (!allowLive && !isManualPreview) {\n          if (window.ScrollCrafterConfig?.debug) {\n            console.log('[ScrollCrafter] Skipping live init in editor (disabled by settings)', node);\n          }\n          return;\n        }\n\n        // Reset force preview flags for next render if it matched\n        if (isManualPreview) {\n          console.log('[ScrollCrafter] Preview active, cleaning up flags');\n          setTimeout(() => {\n            if (window.ScrollCrafterForcePreview === widgetId) window.ScrollCrafterForcePreview = false;\n            if (window.parent && window.parent.ScrollCrafterForcePreview === widgetId) window.parent.ScrollCrafterForcePreview = false;\n            if (window.top && window.top.ScrollCrafterForcePreview === widgetId) window.top.ScrollCrafterForcePreview = false;\n            sessionStorage.removeItem('sc_force_preview');\n          }, 100);\n        }\n      }\n\n      // Normal init (always force in edit mode to ensure fresh logic runs)\n      if (window.ScrollCrafterConfig?.debug) {\n        console.log('[ScrollCrafter] Triggering initWidgetsInScope for node');\n      }\n      initWidgetsInScope(node, elementorFrontend.isEditMode());\n\n      if (elementorFrontend.isEditMode()) {\n        setTimeout(() => {\n          const ScrollTrigger = getScrollTrigger();\n          if (ScrollTrigger) {\n            if (window.ScrollCrafterConfig?.debug) console.log('[ScrollCrafter] Editor Refresh ScrollTrigger');\n            ScrollTrigger.refresh();\n          }\n        }, 200);\n      }\n    });\n\n    if (window.ScrollCrafterConfig?.debug) {\n      console.log('[ScrollCrafter] Elementor hooks registered successfully');\n    }\n  };\n\n  tryRegister();\n};\n\n// Start registration process\nregisterHooks();\n\n// Also listen for the event as a backup if it haven't fired yet\nwindow.addEventListener('elementor/frontend/init', registerHooks);\n\n/**\n * Usuwa ScrollTrigger powi\u0105zany z danym widgetem (je\u015Bli istnieje).\n */\nfunction killTriggerByWidgetId(widgetId) {\n  try {\n    const ScrollTrigger = getScrollTrigger();\n    if (!ScrollTrigger) return;\n\n    const triggerId = 'sc-' + widgetId;\n    const st = ScrollTrigger.getById(triggerId);\n\n    if (st) {\n      if (window.ScrollCrafterConfig?.debug) {\n        console.log(`[ScrollCrafter] Killing trigger: ${triggerId}`);\n      }\n      st.kill(true);\n    }\n\n  } catch (e) {\n    console.warn('[ScrollCrafter] Error killing trigger:', e);\n  }\n}\n"],
  "mappings": "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",
  "names": ["_a", "_b", "parseSmartValue", "parseMacros", "_a", "_b", "_c"]
}
