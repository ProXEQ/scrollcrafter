{
  "version": 3,
  "sources": ["../src/frontend/core/registry.js", "../src/frontend/core/gsap-loader.js", "../src/frontend/widgets/scroll-animation.js", "../src/frontend/widgets/scroll-timeline.js", "../src/frontend/index.js"],
  "sourcesContent": ["// registry.js\nconst registry = {};\n\n// WeakSet jest idealny do \u015Bledzenia obiekt\u00F3w DOM bez wyciek\u00F3w pami\u0119ci.\n// Gdy element zniknie z DOM, zniknie te\u017C z tego Setu.\nconst initializedNodes = new WeakSet();\n\nexport function registerWidget(type, initFn) {\n  registry[type] = initFn;\n}\n\nexport function initWidgetsInScope(root = document) {\n  if (!root || !root.querySelectorAll) {\n    return;\n  }\n\n  // Pobieramy tylko te, kt\u00F3re maj\u0105 konfiguracj\u0119\n  const nodes = root.querySelectorAll('[data-scrollcrafter-config]');\n  \n  nodes.forEach((node) => {\n    // 1. Zabezpieczenie przed podw\u00F3jn\u0105 inicjalizacj\u0105\n    if (initializedNodes.has(node)) {\n        // Opcjonalnie: mo\u017Cna sprawdzi\u0107 czy config si\u0119 zmieni\u0142, ale w WP zazwyczaj\n        // zmiana configu wi\u0105\u017Ce si\u0119 z wymian\u0105 ca\u0142ego w\u0119z\u0142a DOM, wi\u0119c to wystarczy.\n        return;\n    }\n\n    const raw = node.getAttribute('data-scrollcrafter-config');\n    if (!raw) return;\n\n    let config;\n    try {\n      config = JSON.parse(raw);\n    } catch (e) {\n      if (window.ScrollCrafterConfig?.debug) {\n        console.warn('[ScrollCrafter] Invalid config JSON:', e, node);\n      }\n      return;\n    }\n\n    const type = config.widget;\n    if (!type || typeof registry[type] !== 'function') {\n      return;\n    }\n\n    try {\n      // 2. Uruchomienie widgetu\n      registry[type](node, config);\n      \n      // 3. Oznaczenie jako zainicjalizowany\n      initializedNodes.add(node);\n\n      // 4. Dispatch eventu\n      node.dispatchEvent(\n        new CustomEvent('scrollcrafter:init', {\n          bubbles: true,\n          detail: { type, config },\n        }),\n      );\n    } catch (e) {\n      console.error(`[ScrollCrafter] Init error for \"${type}\":`, e);\n    }\n  });\n}\n", "// gsap-loader.js\nexport function getGsap() {\n  if (typeof window === 'undefined') return null;\n\n  const { gsap } = window;\n  \n  if (!gsap) {\n    // Zamiast crashowa\u0107 aplikacj\u0119, logujemy b\u0142\u0105d i zwracamy null.\n    // Wywo\u0142uj\u0105cy musi sprawdzi\u0107 if (!gsap) return;\n    console.error('[ScrollCrafter] GSAP core not found! Make sure gsap.min.js is loaded.');\n    return null;\n  }\n\n  // Auto-rejestracja ScrollTriggera, je\u015Bli jest dost\u0119pny globalnie\n  if (window.ScrollTrigger && gsap.registerPlugin) {\n    // Sprawd\u017A, czy ju\u017C nie jest zarejestrowany, aby unikn\u0105\u0107 ostrze\u017Ce\u0144 GSAP\n    try {\n        gsap.registerPlugin(window.ScrollTrigger);\n    } catch (e) {\n        // Ignorujemy b\u0142\u0119dy rejestracji (np. wersje niekompatybilne)\n    }\n  }\n\n  return gsap;\n}\n\nexport function getScrollTrigger() {\n  if (typeof window === 'undefined') return null;\n\n  if (!window.ScrollTrigger) {\n    console.warn('[ScrollCrafter] ScrollTrigger not found! Animations may not work.');\n    return null;\n  }\n\n  return window.ScrollTrigger;\n}\n", "import { registerWidget } from '../core/registry';\nimport { getGsap, getScrollTrigger } from '../core/gsap-loader';\n\n/**\n * Helper: Bezpieczny parser wyra\u017Ce\u0144 matematycznych (Rozszerzony)\n * Obs\u0142uguje: sw (scrollWidth), cw (clientWidth), vw (viewportWidth), center, end\n */\nfunction parseSmartValue(val, contextNode) {\n    if (typeof val !== 'string') return val;\n\n    if (val === 'calc_scroll_width_neg') val = 'calc(sw * -1)';\n    if (val === 'calc_scroll_width') val = 'calc(sw)';\n    if (val === 'calc_100vh') val = 'calc(vh)';\n\n    if (val.match(/^calc\\s*\\((.*)\\)$/i)) {\n        const expression = val.match(/^calc\\s*\\((.*)\\)$/i)[1];\n\n        return () => {\n            const vw = window.innerWidth;\n            const vh = window.innerHeight;\n            const cw = contextNode.clientWidth || 0;\n            const ch = contextNode.clientHeight || 0;\n            \n            const totalScrollW = contextNode.scrollWidth - cw;\n            const sw = totalScrollW > 0 ? totalScrollW : 0;\n\n            const center = (vw - cw) / 2;\n            const vcenter = (vh - ch) / 2;\n            const end = vw - cw;\n            \n            const varsMap = {\n                sw: sw, cw: cw, ch: ch, vw: vw, vh: vh,\n                center: center, vcenter: vcenter, end: end\n            };\n\n            let cleanExpr = expression;\n            Object.keys(varsMap).forEach(key => {\n                const regex = new RegExp(`\\\\b${key}\\\\b`, 'gi');\n                cleanExpr = cleanExpr.replace(regex, '');\n            });\n\n            if (!/^[0-9\\.\\+\\-\\*\\/\\(\\)\\s]*$/.test(cleanExpr)) {\n                console.warn('[ScrollCrafter] Unsafe calc expression:', expression);\n                return 0;\n            }\n\n            let finalExpr = expression;\n            const sortedKeys = Object.keys(varsMap).sort((a, b) => b.length - a.length);\n\n            sortedKeys.forEach(key => {\n                const regex = new RegExp(`\\\\b${key}\\\\b`, 'gi');\n                finalExpr = finalExpr.replace(regex, varsMap[key]);\n            });\n\n            try {\n                return new Function('return ' + finalExpr)();\n            } catch (e) {\n                console.error('[ScrollCrafter] Calc error:', e);\n                return 0;\n            }\n        };\n    }\n    return val;\n}\n\n/**\n * Helper: Rekurencyjne parsowanie obiektu vars\n */\nfunction parseMacros(vars, contextNode) {\n  if (!vars || typeof vars !== 'object') return vars;\n  const out = { ...vars };\n  Object.keys(out).forEach((key) => {\n    const val = out[key];\n    if (val && typeof val === 'object' && !Array.isArray(val)) {\n      out[key] = parseMacros(val, contextNode);\n      return;\n    }\n    out[key] = parseSmartValue(val, contextNode);\n  });\n  return out;\n}\n\n/**\n * Helper: Buduje Media Query\n */\nfunction buildMediaQuery(targetSlug, isStrict, sortedBreakpoints) {\n    if (!sortedBreakpoints || !Array.isArray(sortedBreakpoints)) return null;\n\n    const currentIndex = sortedBreakpoints.findIndex(bp => bp.key === targetSlug);\n    if (currentIndex === -1) return null;\n\n    const currentBp = sortedBreakpoints[currentIndex];\n    const maxQuery = `(max-width: ${currentBp.value}px)`;\n\n    if (!isStrict) {\n        return maxQuery;\n    }\n\n    let minQuery = '';\n    if (currentIndex > 0) {\n        const prevBp = sortedBreakpoints[currentIndex - 1];\n        const minVal = prevBp.value + 1;\n        minQuery = `(min-width: ${minVal}px) and `;\n    } else {\n        return maxQuery;\n    }\n    return `${minQuery}${maxQuery}`;\n}\n\nregisterWidget('scroll_animation', (node, config) => {\n  const debug = !!window.ScrollCrafterConfig?.debug;\n  const logPrefix = `[ScrollCrafter][${config.id || 'anim'}]`;\n\n  const logConfig = (label, cfg) => {\n    if (!debug) return;\n    console.group(`${logPrefix} ${label}`);\n    console.log('Method:', cfg.animation?.method);\n    console.log('Vars:', cfg.animation?.vars);\n    console.log('Vars2:', cfg.animation?.vars2);\n    console.log('Target:', cfg.target || config.target);\n    console.groupEnd();\n  };\n\n  if (debug) {\n    console.log(`${logPrefix} RAW CONFIG`, config);\n  }\n\n  let gsap;\n  try {\n    gsap = getGsap();\n    getScrollTrigger();\n  } catch (e) {\n    if (debug) console.error(`${logPrefix} GSAP missing`, e);\n    return;\n  }\n\n  const createTween = (cfg, contextNode) => {\n    const targetConfig = cfg.target || config.target || {}; \n    let elements = [];\n\n    if (targetConfig.type === 'wrapper') {\n      elements = [contextNode];\n    } else if (targetConfig.selector) {\n      elements = contextNode.querySelectorAll(targetConfig.selector);\n    } else {\n        elements = [contextNode];\n    }\n\n    if (!elements.length) {\n      if (debug) console.warn(`${logPrefix} No elements found for selector:`, targetConfig.selector);\n      return null;\n    }\n\n    const animConfig = cfg.animation || {};\n    const method = animConfig.method || 'from';\n\n    const calcContext = elements[0]; \n\n    const vars = parseMacros({ ...animConfig.vars }, calcContext);\n    const vars2 = animConfig.vars2 ? parseMacros({ ...animConfig.vars2 }, calcContext) : null;\n\n    if (vars.scrollTrigger) {\n      vars.scrollTrigger.trigger = contextNode;\n      if (config.id) vars.scrollTrigger.id = 'sc-' + config.id;\n    }\n    if (vars2 && vars2.scrollTrigger) {\n      vars2.scrollTrigger.trigger = contextNode;\n      if (config.id) vars2.scrollTrigger.id = 'sc-' + config.id;\n    }\n\n    if (method === 'fromTo' && vars2) {\n      return gsap.fromTo(elements, vars, vars2);\n    } else if (typeof gsap[method] === 'function') {\n      return gsap[method](elements, vars);\n    }\n    \n    if (debug) console.warn(`${logPrefix} Unknown GSAP method:`, method);\n    return null;\n  };\n\n  const mm = gsap.matchMedia();\n\n  mm.add(\"(min-width: 0px)\", () => {\n    if (config.animation) {\n       logConfig('Global config', config);\n       createTween(config, node);\n    }\n  });\n\n  const sysBreakpoints = window.ScrollCrafterConfig?.breakpoints || [];\n\n  if (config.media) {\n    Object.keys(config.media).forEach((mediaSlug) => {\n      const mediaAnim = config.media[mediaSlug];\n      const isStrict = !!(mediaAnim.strict || (mediaAnim.animation && mediaAnim.animation.strict));\n\n      const query = buildMediaQuery(mediaSlug, isStrict, sysBreakpoints);\n\n      if (query) {\n        mm.add(query, (context) => {\n          const merged = {\n            ...config,\n            animation: mediaAnim,\n          };\n          logConfig(`Media override: ${mediaSlug} (strict: ${isStrict})`, merged);\n          createTween(merged, node);\n        });\n      } else {\n        if (debug) console.warn(`${logPrefix} Unknown or invalid breakpoint slug:`, mediaSlug);\n      }\n    });\n  }\n});\n", "import { registerWidget } from '../core/registry';\nimport { getGsap, getScrollTrigger } from '../core/gsap-loader';\n\n/**\n * Helper: Buduje Media Query z obs\u0142ug\u0105 Strict\n * @param {string} targetSlug - np. 'tablet'\n * @param {boolean} isStrict - czy w\u0142\u0105czono tryb strict\n * @param {Array} sortedBreakpoints - tablica z Configu [{key:'mobile', value:767}, ...]\n */\nfunction buildMediaQuery(targetSlug, isStrict, sortedBreakpoints) {\n    if (!sortedBreakpoints || !Array.isArray(sortedBreakpoints)) return null;\n\n    const currentIndex = sortedBreakpoints.findIndex(bp => bp.key === targetSlug);\n    if (currentIndex === -1) return null; \n\n    const currentBp = sortedBreakpoints[currentIndex];\n    const maxQuery = `(max-width: ${currentBp.value}px)`;\n\n    if (!isStrict) {\n        return maxQuery;\n    }\n\n    let minQuery = '';\n    if (currentIndex > 0) {\n        const prevBp = sortedBreakpoints[currentIndex - 1];\n        const minVal = prevBp.value + 1;\n        minQuery = `(min-width: ${minVal}px) and `;\n    }\n    return `${minQuery}${maxQuery}`;\n}\n\n/**\n * Helper: Bezpieczny parser wyra\u017Ce\u0144 matematycznych (Rozszerzony)\n */\nfunction parseSmartValue(val, contextNode) {\n    if (typeof val !== 'string') return val;\n\n    if (val === 'calc_scroll_width_neg') val = 'calc(sw * -1)';\n    if (val === 'calc_scroll_width') val = 'calc(sw)';\n    if (val === 'calc_100vh') val = 'calc(vh)';\n\n    if (val.match(/^calc\\s*\\((.*)\\)$/i)) {\n        const expression = val.match(/^calc\\s*\\((.*)\\)$/i)[1];\n\n        return () => {\n            const vw = window.innerWidth;\n            const vh = window.innerHeight;\n            const cw = contextNode.clientWidth || 0;\n            const ch = contextNode.clientHeight || 0;\n            \n            const totalScrollW = contextNode.scrollWidth - cw;\n            const sw = totalScrollW > 0 ? totalScrollW : 0;\n\n            \n            const center = (vw - cw) / 2;\n\n            const end = vw - cw;\n\n            const vcenter = (vh - ch) / 2;\n            \n            const varsMap = {\n                sw: sw,\n                cw: cw,\n                ch: ch,\n                vw: vw,\n                vh: vh,\n                center: center,\n                vcenter: vcenter,\n                end: end\n            };\n\n            let cleanExpr = expression;\n            Object.keys(varsMap).forEach(key => {\n                const regex = new RegExp(`\\\\b${key}\\\\b`, 'gi');\n                cleanExpr = cleanExpr.replace(regex, '');\n            });\n\n            if (!/^[0-9\\.\\+\\-\\*\\/\\(\\)\\s]*$/.test(cleanExpr)) {\n                console.warn('[ScrollCrafter] Unsafe characters in calc expression:', expression);\n                return 0;\n            }\n\n            let finalExpr = expression;\n            const sortedKeys = Object.keys(varsMap).sort((a, b) => b.length - a.length);\n\n            sortedKeys.forEach(key => {\n                const regex = new RegExp(`\\\\b${key}\\\\b`, 'gi');\n                finalExpr = finalExpr.replace(regex, varsMap[key]);\n            });\n\n            try {\n                return new Function('return ' + finalExpr)();\n            } catch (e) {\n                console.error('[ScrollCrafter] Calc error:', e);\n                return 0;\n            }\n        };\n    }\n\n    return val;\n}\n\nfunction parseMacros(vars, contextNode) {\n  if (!vars || typeof vars !== 'object') return vars;\n  const out = { ...vars };\n  Object.keys(out).forEach((key) => {\n    const val = out[key];\n    if (val && typeof val === 'object' && !Array.isArray(val)) {\n      out[key] = parseMacros(val, contextNode);\n      return;\n    }\n    out[key] = parseSmartValue(val, contextNode);\n  });\n  return out;\n}\n\n\nfunction getPinElement(node) {\n  return node;\n}\n\nfunction createTimeline(node, configData, globalConfig, debug, logPrefix, gsap) {\n  const pinElem = getPinElement(node);\n\n  const targetCfg = configData.target || globalConfig.target || {};\n  let mainTargets = [pinElem];\n\n  if (targetCfg.selector && targetCfg.type !== 'wrapper') {\n    const found = pinElem.querySelectorAll(targetCfg.selector);\n    if (found.length) mainTargets = Array.from(found);\n  }\n\n  const timelineVars = { ...(configData.timelineVars || {}) };\n  if (timelineVars.defaults) {\n    timelineVars.defaults = parseMacros(timelineVars.defaults, pinElem);\n  }\n\n  if (!timelineVars.scrollTrigger) timelineVars.scrollTrigger = {};\n  const st = timelineVars.scrollTrigger;\n\n  if (!st.trigger) st.trigger = pinElem;\n  if (st.pin === true) st.pin = pinElem;\n  if (typeof st.invalidateOnRefresh === 'undefined') st.invalidateOnRefresh = true;\n  if (typeof st.anticipatePin === 'undefined') st.anticipatePin = 0.5;\n  if (globalConfig.id && !st.id) st.id = `sc-${globalConfig.id}`;\n\n  const tl = gsap.timeline(timelineVars);\n\n  const steps = configData.steps || [];\n  steps.forEach((step, index) => {\n    const method = step.method || 'to';\n    const position = step.position;\n\n    if (method === 'addLabel') {\n      const label = step.vars;\n      if (typeof label === 'string') tl.addLabel(label, position);\n      return;\n    }\n    if (method === 'call') return;\n\n    let targets = mainTargets;\n    if (step.selector) {\n      const found = pinElem.querySelectorAll(step.selector);\n      if (!found.length) {\n        if (debug) console.warn(`${logPrefix} Step ${index + 1}: selector \"${step.selector}\" not found`);\n        return;\n      }\n      targets = Array.from(found);\n    }\n\n    const vars = parseMacros(step.vars || {}, pinElem);\n    const vars2 = step.vars2 ? parseMacros(step.vars2, pinElem) : null;\n\n    try {\n      if (method === 'fromTo' && vars2) tl.fromTo(targets, vars, vars2, position);\n      else if (typeof tl[method] === 'function') tl[method](targets, vars, position);\n    } catch (e) {\n      if (debug) console.error(`${logPrefix} Error step ${index + 1}`, e);\n    }\n  });\n\n  return tl;\n}\n\n\nregisterWidget('scroll_timeline', (node, config) => {\n  const debug = !!window.ScrollCrafterConfig?.debug;\n  const sysBreakpoints = window.ScrollCrafterConfig?.breakpoints || [];\n  const logPrefix = `[ScrollCrafter][timeline:${config.id || 'tl'}]`;\n\n  let gsap;\n  try {\n    gsap = getGsap();\n    getScrollTrigger();\n  } catch (e) {\n    if (debug) console.error(`${logPrefix} GSAP missing`, e);\n    return;\n  }\n\n  const mm = gsap.matchMedia();\n\n  mm.add(\"(min-width: 0px)\", () => {\n     if (config.steps && config.steps.length > 0) {\n         createTimeline(node, config, config, debug, logPrefix, gsap);\n     }\n  });\n\n  if (config.media) {\n      Object.keys(config.media).forEach((mediaSlug) => {\n          const mediaConfig = config.media[mediaSlug];\n          \n          const isStrict = !!mediaConfig.strict;\n\n          const query = buildMediaQuery(mediaSlug, isStrict, sysBreakpoints);\n\n          if (query) {\n              mm.add(query, () => {\n                  createTimeline(node, mediaConfig, config, debug, logPrefix + `[${mediaSlug}]`, gsap);\n              });\n          } else {\n             if (debug) console.warn(`${logPrefix} Unknown breakpoint slug: ${mediaSlug}`);\n          }\n      });\n  }\n});\n", "import { initWidgetsInScope } from './core/registry';\nimport { getScrollTrigger } from './core/gsap-loader';\nimport './widgets/scroll-animation';\nimport './widgets/scroll-timeline';\n\n/**\n * G\u0142\u00F3wna funkcja inicjalizuj\u0105ca.\n */\nfunction init() {\n  initWidgetsInScope(document);\n}\n\nif (document.readyState === 'loading') {\n  document.addEventListener('DOMContentLoaded', init);\n} else {\n  init();\n}\n\nwindow.addEventListener('elementor/popup/show', (event) => {\n  initWidgetsInScope(event.target);\n  \n  const ScrollTrigger = getScrollTrigger();\n  if (ScrollTrigger) ScrollTrigger.refresh();\n});\n\nwindow.addEventListener('elementor/frontend/init', () => {\n  if (!window.elementorFrontend) return;\n\n  elementorFrontend.hooks.addAction('frontend/element_ready/global', ($scope) => {\n    const node = $scope[0]; \n\n    if (elementorFrontend.isEditMode()) {\n      const widgetId = node.getAttribute('data-id');\n      if (widgetId) {\n        killTriggerByWidgetId(widgetId);\n      }\n    }\n\n    initWidgetsInScope(node);\n  });\n});\n\n/**\n * Usuwa ScrollTrigger powi\u0105zany z danym widgetem (je\u015Bli istnieje).\n */\nfunction killTriggerByWidgetId(widgetId) {\n  try {\n    const ScrollTrigger = getScrollTrigger();\n    if (!ScrollTrigger) return;\n\n    const triggerId = 'sc-' + widgetId;\n    const st = ScrollTrigger.getById(triggerId);\n\n    if (st) {\n      if (window.ScrollCrafterConfig?.debug) {\n        console.log(`[ScrollCrafter] Killing trigger: ${triggerId}`);\n      }\n      st.kill(true);\n    }\n    \n  } catch (e) {\n    console.warn('[ScrollCrafter] Error killing trigger:', e);\n  }\n}\n"],
  "mappings": "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",
  "names": ["_a", "_b", "buildMediaQuery", "parseSmartValue", "parseMacros"]
}
